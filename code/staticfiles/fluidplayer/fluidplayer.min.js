var fluidPlayer=function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function n(e,n){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,n){if(e){if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){o&&(e=o);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,d=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return l=e.done,e},e:function(e){d=!0,r=e},f:function(){try{l||null==o.return||o.return()}finally{if(d)throw r}}}}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var i={exports:{}};i.exports=function(){function t(t){var n=e(t);return null!==t&&("object"===n||"function"===n)}function n(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=0,r=void 0,l=void 0,d=function(e,t){P[a]=e,P[a+1]=t,2===(a+=2)&&(l?l(C):A())};function s(e){l=e}function u(e){d=e}var c="undefined"!=typeof window?window:void 0,p=c||{},m=p.MutationObserver||p.WebKitMutationObserver,f="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),y="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function v(){return function(){return process.nextTick(C)}}function g(){return void 0!==r?function(){r(C)}:b()}function h(){var e=0,t=new m(C),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function _(){var e=new MessageChannel;return e.port1.onmessage=C,function(){return e.port2.postMessage(0)}}function b(){var e=setTimeout;return function(){return e(C,1)}}var P=new Array(1e3);function C(){for(var e=0;e<a;e+=2)(0,P[e])(P[e+1]),P[e]=void 0,P[e+1]=void 0;a=0}function E(){try{var e=Function("return this")().require("vertx");return r=e.runOnLoop||e.runOnContext,g()}catch(e){return b()}}var A=void 0;function w(e,t){var n=this,o=new this.constructor(T);void 0===o[I]&&Q(o);var i=n._state;if(i){var a=arguments[i-1];d((function(){return z(i,o,a,n._result)}))}else W(n,o,e,t);return o}function L(t){var n=this;if(t&&"object"===e(t)&&t.constructor===n)return t;var o=new n(T);return F(o,t),o}A=f?v():m?h():y?_():void 0===c?E():b();var I=Math.random().toString(36).substring(2);function T(){}var k=void 0,O=1,R=2;function V(){return new TypeError("You cannot resolve a promise with itself")}function S(){return new TypeError("A promises callback cannot return that same promise.")}function B(e,t,n,o){try{e.call(t,n,o)}catch(e){return e}}function N(e,t,n){d((function(e){var o=!1,i=B(n,t,(function(n){o||(o=!0,t!==n?F(e,n):U(e,n))}),(function(t){o||(o=!0,H(e,t))}),"Settle: "+(e._label||" unknown promise"));!o&&i&&(o=!0,H(e,i))}),e)}function M(e,t){t._state===O?U(e,t._result):t._state===R?H(e,t._result):W(t,void 0,(function(t){return F(e,t)}),(function(t){return H(e,t)}))}function x(e,t,o){t.constructor===e.constructor&&o===w&&t.constructor.resolve===L?M(e,t):void 0===o?U(e,t):n(o)?N(e,t,o):U(e,t)}function F(e,n){if(e===n)H(e,V());else if(t(n)){var o=void 0;try{o=n.then}catch(t){return void H(e,t)}x(e,n,o)}else U(e,n)}function D(e){e._onerror&&e._onerror(e._result),j(e)}function U(e,t){e._state===k&&(e._result=t,e._state=O,0!==e._subscribers.length&&d(j,e))}function H(e,t){e._state===k&&(e._state=R,e._result=t,d(D,e))}function W(e,t,n,o){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+O]=n,i[a+R]=o,0===a&&e._state&&d(j,e)}function j(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var o=void 0,i=void 0,a=e._result,r=0;r<t.length;r+=3)o=t[r],i=t[r+n],o?z(n,o,i,a):i(a);e._subscribers.length=0}}function z(e,t,o,i){var a=n(o),r=void 0,l=void 0,d=!0;if(a){try{r=o(i)}catch(e){d=!1,l=e}if(t===r)return void H(t,S())}else r=i;t._state!==k||(a&&d?F(t,r):!1===d?H(t,l):e===O?U(t,r):e===R&&H(t,r))}function q(e,t){try{t((function(t){F(e,t)}),(function(t){H(e,t)}))}catch(t){H(e,t)}}var X=0;function K(){return X++}function Q(e){e[I]=X++,e._state=void 0,e._result=void 0,e._subscribers=[]}function J(){return new Error("Array Methods must be provided an Array")}var G=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(T),this.promise[I]||Q(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?U(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&U(this.promise,this._result))):H(this.promise,J())}return e.prototype._enumerate=function(e){for(var t=0;this._state===k&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,o=n.resolve;if(o===L){var i=void 0,a=void 0,r=!1;try{i=e.then}catch(e){r=!0,a=e}if(i===w&&e._state!==k)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===ne){var l=new n(T);r?H(l,a):x(l,e,i),this._willSettleAt(l,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(o(e),t)},e.prototype._settledAt=function(e,t,n){var o=this.promise;o._state===k&&(this._remaining--,e===R?H(o,n):this._result[t]=n),0===this._remaining&&U(o,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;W(e,void 0,(function(e){return n._settledAt(O,t,e)}),(function(e){return n._settledAt(R,t,e)}))},e}();function Y(e){return new G(this,e).promise}function $(e){var t=this;return i(e)?new t((function(n,o){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(n,o)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function Z(e){var t=new this(T);return H(t,e),t}function ee(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function te(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ne=function(){function e(t){this[I]=K(),this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&ee(),this instanceof e?q(this,t):te())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this,o=t.constructor;return n(e)?t.then((function(t){return o.resolve(e()).then((function(){return t}))}),(function(t){return o.resolve(e()).then((function(){throw t}))})):t.then(e,e)},e}();function oe(){var e=void 0;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=ne}return ne.prototype.then=w,ne.all=Y,ne.race=$,ne.resolve=L,ne.reject=Z,ne._setScheduler=s,ne._setAsap=u,ne._asap=d,ne.polyfill=oe,ne.Promise=ne,ne}();var a=i.exports;"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},writable:!0,configurable:!0}),function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})),a.polyfill(),"undefined"==typeof window||window.dashjs||(window.dashjs={skipAutoCreate:!0,isDefaultSubject:!0});var r=[function(e,t){var n={AdStarted:function(){return e.onStartVpaidAd},AdStopped:function(){return e.onStopVpaidAd},AdSkipped:function(){return e.onSkipVpaidAd},AdLoaded:function(){return e.onVpaidAdLoaded},AdLinearChange:function(){return e.onVpaidAdLinearChange},AdSizeChange:function(){return e.onVpaidAdSizeChange},AdExpandedChange:function(){return e.onVpaidAdExpandedChange},AdSkippableStateChange:function(){return e.onVpaidAdSkippableStateChange},AdDurationChange:function(){return e.onVpaidAdDurationChange},AdRemainingTimeChange:function(){return e.onVpaidAdRemainingTimeChange},AdVolumeChange:function(){return e.onVpaidAdVolumeChange},AdImpression:function(){return e.onVpaidAdImpression},AdClickThru:function(){return e.onVpaidAdClickThru},AdInteraction:function(){return e.onVpaidAdInteraction},AdVideoStart:function(){return e.onVpaidAdVideoStart},AdVideoFirstQuartile:function(){return e.onVpaidAdVideoFirstQuartile},AdVideoMidpoint:function(){return e.onVpaidAdVideoMidpoint},AdVideoThirdQuartile:function(){return e.onVpaidAdVideoThirdQuartile},AdVideoComplete:function(){return e.onVpaidAdVideoComplete},AdUserAcceptInvitation:function(){return e.onVpaidAdUserAcceptInvitation},AdUserMinimize:function(){return e.onVpaidAdUserMinimize},AdUserClose:function(){return e.onVpaidAdUserClose},AdPaused:function(){return e.onVpaidAdPaused},AdPlaying:function(){return e.onVpaidAdPlaying},AdError:function(){return e.onVpaidAdError},AdLog:function(){return e.onVpaidAdLog}};e.checkVPAIDInterface=function(e){var t=e;return!!(t.handshakeVersion&&"function"==typeof t.handshakeVersion&&t.initAd&&"function"==typeof t.initAd&&t.startAd&&"function"==typeof t.startAd&&t.stopAd&&"function"==typeof t.stopAd&&t.skipAd&&"function"==typeof t.skipAd&&t.resizeAd&&"function"==typeof t.resizeAd&&t.pauseAd&&"function"==typeof t.pauseAd&&t.resumeAd&&"function"==typeof t.resumeAd&&t.expandAd&&"function"==typeof t.expandAd&&t.collapseAd&&"function"==typeof t.collapseAd&&t.subscribe&&"function"==typeof t.subscribe&&t.unsubscribe&&"function"==typeof t.unsubscribe)},e.onVpaidAdPaused=function(){e.vpaidTimeoutTimerClear(),e.debugMessage("onAdPaused")},e.onVpaidAdPlaying=function(){e.vpaidTimeoutTimerClear(),e.debugMessage("onAdPlaying")},e.onVpaidAdError=function(t){e.debugMessage("onAdError: "+t),e.vpaidTimeoutTimerClear(),e.onVpaidEnded()},e.onVpaidAdLog=function(t){e.debugMessage("onAdLog: "+t)},e.onVpaidAdUserAcceptInvitation=function(){e.debugMessage("onAdUserAcceptInvitation")},e.onVpaidAdUserMinimize=function(){e.debugMessage("onAdUserMinimize")},e.onVpaidAdUserClose=function(){e.debugMessage("onAdUserClose")},e.onVpaidAdSkippableStateChange=function(){e.vpaidAdUnit&&e.debugMessage("Ad Skippable State Changed to: "+e.vpaidAdUnit.getAdSkippableState())},e.onVpaidAdExpandedChange=function(){e.vpaidAdUnit&&e.debugMessage("Ad Expanded Changed to: "+e.vpaidAdUnit.getAdExpanded())},e.getVpaidAdExpanded=function(){if(e.debugMessage("getAdExpanded"),e.vpaidAdUnit)return e.vpaidAdUnit.getAdExpanded()},e.getVpaidAdSkippableState=function(){if(e.debugMessage("getAdSkippableState"),e.vpaidAdUnit)return e.vpaidAdUnit.getAdSkippableState()},e.onVpaidAdSizeChange=function(){e.vpaidAdUnit&&e.debugMessage("Ad size changed to: w="+e.vpaidAdUnit.getAdWidth()+" h="+e.vpaidAdUnit.getAdHeight())},e.onVpaidAdDurationChange=function(){e.vpaidAdUnit&&e.debugMessage("Ad Duration Changed to: "+e.vpaidAdUnit.getAdDuration())},e.onVpaidAdRemainingTimeChange=function(){e.vpaidAdUnit&&e.debugMessage("Ad Remaining Time Changed to: "+e.vpaidAdUnit.getAdRemainingTime())},e.getVpaidAdRemainingTime=function(){if(e.debugMessage("getAdRemainingTime"),e.vpaidAdUnit)return e.vpaidAdUnit.getAdRemainingTime()},e.onVpaidAdImpression=function(){e.debugMessage("Ad Impression"),e.trackSingleEvent("impression")},e.onVpaidAdClickThru=function(t,n,o){e.debugMessage("Clickthrough portion of the ad was clicked"),o&&window.open(e.vastOptions.clickthroughUrl),e.pauseVpaidAd(),e.callUris(e.vastOptions.clicktracking)},e.onVpaidAdInteraction=function(t){e.debugMessage("A non-clickthrough event has occured")},e.onVpaidAdVideoStart=function(){e.debugMessage("Video 0% completed"),e.trackSingleEvent("start")},e.onVpaidAdVideoFirstQuartile=function(){e.debugMessage("Video 25% completed"),e.trackSingleEvent("firstQuartile")},e.onVpaidAdVideoMidpoint=function(){e.debugMessage("Video 50% completed"),e.trackSingleEvent("midpoint")},e.onVpaidAdVideoThirdQuartile=function(){e.debugMessage("Video 75% completed"),e.trackSingleEvent("thirdQuartile")},e.onVpaidAdVideoComplete=function(){e.debugMessage("Video 100% completed"),e.trackSingleEvent("complete")},e.onVpaidAdLinearChange=function(){var t=document.getElementsByClassName("fluid_vpaidNonLinear_ad")[0],n=document.getElementById("close_button_"+e.videoPlayerId),o=t.getAttribute("adlistid");if(e.debugMessage("Ad linear has changed: "+e.vpaidAdUnit.getAdLinear()),e.vpaidAdUnit.getAdLinear()){e.backupMainVideoContentTime(o),e.isCurrentlyPlayingAd=!0,n&&n.remove(),t.className="fluid_vpaid_slot",t.id=e.videoPlayerId+"_fluid_vpaid_slot",e.domRef.player.loop=!1,e.domRef.player.removeAttribute("controls");for(var i=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress"),a=0;a<i.length;a++)i[a].style.backgroundColor=e.displayOptions.layoutControls.adProgressColor;e.toggleLoader(!1)}},e.getVpaidAdLinear=function(){return e.debugMessage("getAdLinear"),e.vpaidAdUnit.getAdLinear()},e.startVpaidAd=function(){e.debugMessage("startAd"),e.vpaidTimeoutTimerStart(),e.vpaidAdUnit.startAd()},e.onVpaidAdLoaded=function(){e.debugMessage("ad has been loaded"),e.vpaidTimeoutTimerClear(),e.startVpaidAd()},e.onStartVpaidAd=function(){e.debugMessage("Ad has started"),e.vpaidTimeoutTimerClear()},e.stopVpaidAd=function(){e.vpaidTimeoutTimerStart(),e.vpaidAdUnit.stopAd()},e.hardStopVpaidAd=function(t){e.vpaidAdUnit&&(e.vpaidAdUnit.stopAd(),e.vpaidAdUnit=null);for(var n=document.getElementsByClassName("fluid_vpaid_iframe"),o=document.getElementsByClassName("fluid_vpaid_slot"),i=document.getElementsByClassName("fluid_vpaidNonLinear_ad"),a=0;a<n.length;a++)n[a].getAttribute("adListId")!==t&&n[a].remove();for(var r=0;r<o.length;r++)o[r].getAttribute("adListId")!==t&&o[r].remove();for(var l=0;l<i.length;l++)i[l].getAttribute("adListId")!==t&&i[l].remove()},e.onStopVpaidAd=function(){e.debugMessage("Ad has stopped"),e.vpaidTimeoutTimerClear(),e.onVpaidEnded()},e.onSkipVpaidAd=function(){e.debugMessage("Ad was skipped"),e.vpaidTimeoutTimerClear(),e.onVpaidEnded()},e.skipVpaidAd=function(){e.vpaidTimeoutTimerStart(),e.vpaidAdUnit&&(e.vpaidAdUnit.skipAd(),e.vpaidTimeoutTimerClear(),e.onVpaidEnded())},e.setVpaidAdVolume=function(t){e.vpaidAdUnit&&e.vpaidAdUnit.setAdVolume(t)},e.getVpaidAdVolume=function(){if(e.vpaidAdUnit)return e.vpaidAdUnit.getAdVolume()},e.onVpaidAdVolumeChange=function(){e.vpaidAdUnit&&e.debugMessage("Ad Volume has changed to - "+e.vpaidAdUnit.getAdVolume())},e.resizeVpaidAuto=function(){if(null!==e.vastOptions&&e.vastOptions.vpaid&&e.vastOptions.linear){var t=e.domRef.player.offsetWidth,n=e.domRef.player.offsetHeight,o=e.fullscreenMode?"fullscreen":"normal";e.resizeVpaidAd(t,n,o)}},e.resizeVpaidAd=function(t,n,o){e.vpaidAdUnit&&e.vpaidAdUnit.resizeAd(t,n,o)},e.pauseVpaidAd=function(){e.vpaidTimeoutTimerStart(),e.vpaidAdUnit&&e.vpaidAdUnit.pauseAd()},e.resumeVpaidAd=function(){e.vpaidTimeoutTimerStart(),e.vpaidAdUnit&&e.vpaidAdUnit.resumeAd()},e.expandVpaidAd=function(){e.vpaidAdUnit&&e.vpaidAdUnit.expandAd()},e.collapseVpaidAd=function(){e.vpaidAdUnit&&e.vpaidAdUnit.collapseAd()},e.vpaidTimeoutTimerClear=function(){e.vpaidTimer&&clearTimeout(e.vpaidTimer)},e.vpaidTimeoutTimerStart=function(){e.vpaidTimeoutTimerClear(),e.vpaidTimer=setTimeout((function(){e.announceLocalError("901"),e.onVpaidEnded()}),e.displayOptions.vastOptions.vpaidTimeout)},e.vpaidCallbackListenersAttach=function(){for(var t in n)e.vpaidAdUnit.subscribe(n[t](),t,e)},e.vpaidCallbackListenersDetach=function(){if(e.vpaidAdUnit)for(var t in n)e.vpaidAdUnit.unsubscribe(n[t](),t,e)},e.loadVpaid=function(t,n){var o=document.createElement("iframe");o.id=e.videoPlayerId+"_"+t+"_fluid_vpaid_iframe",o.className="fluid_vpaid_iframe",o.setAttribute("adListId",t),o.setAttribute("frameborder","0"),e.domRef.player.parentNode.insertBefore(o,e.domRef.player.nextSibling),o.contentWindow.document.write('<script src="'+n+'"><\/script>'),e.tempVpaidCounter=0,e.getVPAIDAdInterval=setInterval((function(){var n=o.contentWindow.getVPAIDAd;if(n&&"function"==typeof n)e.vpaidAdUnit&&e.hardStopVpaidAd(t),e.vpaidAdUnit=n(),clearInterval(e.getVPAIDAdInterval),e.checkVPAIDInterface(e.vpaidAdUnit)&&(e.getVpaidAdLinear()?(e.isCurrentlyPlayingAd=!0,e.switchPlayerToVpaidMode(t)):(e.debugMessage("non linear vpaid ad is loaded"),e.loadVpaidNonlinearAssets(t)));else{if(e.tempVpaidCounter++,e.tempVpaidCounter>=20)return clearInterval(e.getVPAIDAdInterval),e.adList[t].error=!0,e.playMainVideoWhenVpaidFails(403),!1;e.debugMessage(e.tempVpaidCounter)}}),100)},e.onVpaidEnded=function(t){t&&t.stopImmediatePropagation();var n=document.getElementById(e.videoPlayerId+"_fluid_vpaid_slot");e.vpaidCallbackListenersDetach(),e.vpaidAdUnit=null,clearInterval(e.getVPAIDAdInterval),n&&n.remove(),e.checkForNextAd()},e.playMainVideoWhenVpaidFails=function(t){var n=document.getElementById(e.videoPlayerId+"_fluid_vpaid_slot");n&&n.remove(),clearInterval(e.getVPAIDAdInterval),e.playMainVideoWhenVastFails(t)},e.switchPlayerToVpaidMode=function(){}},function(e,t){e.getClickThroughUrlFromLinear=function(t){var n=t.getElementsByTagName("VideoClicks");if(n.length){var o=n[0].getElementsByTagName("ClickThrough");if(o.length)return e.extractNodeData(o[0])}return!1},e.getVastAdTagUriFromWrapper=function(t){var n=t.getElementsByTagName("Wrapper");if(void 0!==n&&n.length){var o=n[0].getElementsByTagName("VASTAdTagURI");if(o.length)return e.extractNodeData(o[0])}return!1},e.hasInLine=function(e){var t=e.getElementsByTagName("InLine");return void 0!==t&&t.length},e.hasVastAdTagUri=function(e){var t=e.getElementsByTagName("VASTAdTagURI");return void 0!==t&&t.length},e.getClickThroughUrlFromNonLinear=function(t){var n="";if(t.getElementsByTagName("NonLinear").length){var o=t.getElementsByTagName("NonLinearClickThrough");o.length&&(n=e.extractNodeData(o[0]))}return n},e.getTrackingFromLinear=function(e){var t=e.getElementsByTagName("TrackingEvents");return t.length?t[0].getElementsByTagName("Tracking"):[]},e.getDurationFromLinear=function(t){var n=t.getElementsByTagName("Duration");if(n.length&&void 0!==n[0].childNodes[0]){var o=e.extractNodeData(n[0]);return e.convertTimeStringToSeconds(o)}return!1},e.getDurationFromNonLinear=function(t){var n=0,o=t.getElementsByTagName("NonLinear");return o.length&&void 0!==o[0].getAttribute("minSuggestedDuration")&&(n=e.convertTimeStringToSeconds(o[0].getAttribute("minSuggestedDuration"))),n},e.getDimensionFromNonLinear=function(e){var t={width:null,height:null},n=e.getElementsByTagName("NonLinear");return n.length&&(void 0!==n[0].getAttribute("width")&&(t.width=n[0].getAttribute("width")),void 0!==n[0].getAttribute("height")&&(t.height=n[0].getAttribute("height"))),t},e.getCreativeTypeFromStaticResources=function(e){var t="",n=e.getElementsByTagName("NonLinear");return n.length&&void 0!==n[0].childNodes[0]&&(t=n[0].getElementsByTagName("StaticResource")[0].getAttribute("creativeType")),t.toLowerCase()},e.getMediaFilesFromLinear=function(e){var t=e.getElementsByTagName("MediaFiles");return t.length?t[0].getElementsByTagName("MediaFile"):[]},e.getStaticResourcesFromNonLinear=function(e){var t=[],n=e.getElementsByTagName("NonLinear");return n.length&&(t=n[0].getElementsByTagName("StaticResource")),t},e.extractNodeData=function(e){for(var t="",n=0;n<e.childNodes.length;n++){var o=e.childNodes[n];8===o.nodeType||3===o.nodeType&&/^\s*$/.test(o.nodeValue)||(t+=o.nodeValue)}return t.replace(/(^\s+|\s+$)/g,"")},e.getAdParametersFromLinear=function(t){var n=t.getElementsByTagName("AdParameters"),o=null;return n.length&&(o=e.extractNodeData(n[0])),o},e.getMediaFileListFromLinear=function(t){var n=[],o=e.getMediaFilesFromLinear(t);if(!o.length)return n;for(var i=0;i<o.length;i++){var a=o[i].getAttribute("mediaType");a||(a="2D"),e.extractNodeData(o[i])&&n.push({src:e.extractNodeData(o[i]),type:o[i].getAttribute("type"),apiFramework:o[i].getAttribute("apiFramework"),codec:o[i].getAttribute("codec"),id:o[i].getAttribute("codec"),fileSize:o[i].getAttribute("fileSize"),delivery:o[i].getAttribute("delivery"),width:o[i].getAttribute("width"),height:o[i].getAttribute("height"),mediaType:a.toLowerCase()})}return n},e.getIconClickThroughFromLinear=function(t){var n=t.getElementsByTagName("IconClickThrough");return n.length?e.extractNodeData(n[0]):""},e.getStaticResourceFromNonLinear=function(t){for(var n,o=e.getStaticResourcesFromNonLinear(t),i=0;i<o.length;i++)if(o[i].getAttribute("type")||(n=e.extractNodeData(o[i])),o[i].getAttribute("type")===e.displayOptions.staticResource)return e.extractNodeData(o[i]);return n},e.registerTrackingEvents=function(t,n){for(var o=e.getTrackingFromLinear(t),i="",a=0,r=0;r<o.length;r++)switch(i=o[r].getAttribute("event")){case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":void 0===n.tracking[i]&&(n.tracking[i]=[]),void 0===n.stopTracking[i]&&(n.stopTracking[i]=[]),n.tracking[i].push(o[r].childNodes[0].nodeValue),n.stopTracking[i]=!1;break;case"progress":void 0===n.tracking[i]&&(n.tracking[i]=[]),a=e.convertTimeStringToSeconds(o[r].getAttribute("offset")),void 0===n.tracking[i][a]&&(n.tracking[i][a]={elements:[],stopTracking:!1}),n.tracking[i][a].elements.push(o[r].childNodes[0].nodeValue)}},e.registerClickTracking=function(e,t){if(e&&e.length)for(var n=0;n<e.length;n++)""!==e[n]&&t.clicktracking.push(e[n])},e.registerImpressionEvents=function(t,n){if(t.length)for(var o=0;o<t.length;o++){var i=e.extractNodeData(t[o]);n.impression.push(i)}},e.registerErrorEvents=function(e,t){null!=e&&1===e.length&&1===e[0].childNodes.length&&(t.errorUrl=e[0].childNodes[0].nodeValue)},e.announceError=function(t){if(void 0!==e.vastOptions.errorUrl&&e.vastOptions.errorUrl){var n=void 0!==t?parseInt(t):900,o=e.vastOptions.errorUrl.replace("[ERRORCODE]",n);e.callUris([o])}},e.getClickTrackingEvents=function(t){var n=[],o=t.getElementsByTagName("VideoClicks");if(o.length){var i=o[0].getElementsByTagName("ClickTracking");if(i.length){for(var a=0;a<i.length;a++){var r=e.extractNodeData(i[a]);n.push(r)}return n}}},e.getNonLinearClickTrackingEvents=function(t){var n=[];if(t.getElementsByTagName("NonLinear").length){var o=t.getElementsByTagName("NonLinearClickTracking");if(o.length){for(var i=0;i<o.length;i++){var a=e.extractNodeData(o[i]);n.push(a)}return n}}},e.callUris=function(e){for(var t=0;t<e.length;t++)(new Image).src=e[t]},e.recalculateAdDimensions=function(){var t=document.getElementById(e.videoPlayerId),n=document.getElementById("vast_clickthrough_layer_"+e.videoPlayerId);n&&(n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px");var o=e.checkFullscreenSupport("fluid_video_wrapper_"+e.videoPlayerId),i=document.getElementById(e.videoPlayerId+"_fluid_control_fullscreen"),a=document.getElementById(e.videoPlayerId+"context_option_fullscreen");if(o)null===document[o.isFullscreen]?e.fullscreenOff(i,a):e.fullscreenOn(i,a);else{var r=document.getElementById("fluid_video_wrapper_"+e.videoPlayerId);-1!==r.className.search(/\bpseudo_fullscreen\b/g)?(r.className+=" pseudo_fullscreen",e.fullscreenOn(i,a)):(r.className=r.className.replace(/\bpseudo_fullscreen\b/g,""),e.fullscreenOff(i,a))}},e.prepareVast=function(t){for(var n=e.findRoll(t),o=0;o<n.length;o++){var i=n[o];!0!==e.adList[i].vastLoaded&&!0!==e.adList[i].error&&(e.processVastWithRetries(e.adList[i]),e.domRef.player.addEventListener("adId_"+i,e[t]))}},e.playMainVideoWhenVastFails=function(t){e.debugMessage("playMainVideoWhenVastFails called"),e.domRef.player.removeEventListener("loadedmetadata",e.switchPlayerToVastMode),e.domRef.player.pause(),e.toggleLoader(!1),e.displayOptions.vastOptions.vastAdvanced.noVastVideoCallback(),e.vastOptions&&void 0!==e.vastOptions.errorUrl?e.announceError(t):e.announceLocalError(t),e.switchToMainVideo()},e.switchPlayerToVastMode=function(){},e.processVastXml=function(t,n,o){var i;if(t){var a=n.options.tag,r=n.options.index||0,l=t.getElementsByTagName("Impression");null!==l&&e.registerImpressionEvents(l,n);var d=t.getElementsByTagName("Error");null!==d&&e.registerErrorEvents(d,n);var s=t.querySelector("Ad[id*=".concat(a,"]")),u=[];if(s&&(u=Array.from(s.querySelectorAll("Creative"))),void 0!==u&&u.length){var c=u[r].getElementsByTagName("Linear");if(null!=c&&c.length){var p=c[0];e.registerTrackingEvents(p,n),i=e.getClickTrackingEvents(p),e.registerClickTracking(i,n),!e.hasVastAdTagUri(t)&&e.hasInLine(t)&&(n.adFinished=!1,n.adType="linear",n.vpaid=!1,n.skipoffset=e.convertTimeStringToSeconds(p.getAttribute("skipoffset")),n.clickthroughUrl=e.getClickThroughUrlFromLinear(p),n.duration=e.getDurationFromLinear(p),n.mediaFileList=e.getMediaFileListFromLinear(p),n.adParameters=e.getAdParametersFromLinear(p),n.iconClick=e.getIconClickThroughFromLinear(p),n.adParameters&&(n.vpaid=!0))}var m=u[r].getElementsByTagName("NonLinearAds");if(null!=m&&m.length){var f=m[0];e.registerTrackingEvents(f,n),i=e.getNonLinearClickTrackingEvents(f),e.registerClickTracking(i,n),!e.hasVastAdTagUri(t)&&e.hasInLine(t)&&(n.adType="nonLinear",n.vpaid=!1,n.clickthroughUrl=e.getClickThroughUrlFromNonLinear(f),n.duration=e.getDurationFromNonLinear(f),n.dimension=e.getDimensionFromNonLinear(f),n.staticResource=e.getStaticResourceFromNonLinear(f),n.creativeType=e.getCreativeTypeFromStaticResources(f),n.adParameters=e.getAdParametersFromLinear(f),n.adParameters&&(n.vpaid=!0))}!e.hasVastAdTagUri(t)&&e.hasInLine(t)&&(void 0!==n.mediaFileList||void 0!==n.staticResource?o(!0,n):o(!1))}else o(!1)}else o(!1)},e.processVastWithRetries=function(t){var n=t.vastTag,o=t.id;e.processUrl(n,t,(function i(a,r){if(a&&void 0!==r&&r.vpaid&&!e.displayOptions.vastOptions.allowVPAID&&(a=!1,e.announceLocalError("103","VPAID not allowed, so skipping this VAST tag.")),a){if("linear"===r.adType){void 0!==r.iconClick&&null!==r.iconClick&&r.iconClick.length&&(e.adList[o].landingPage=r.iconClick);var l=e.getSupportedMediaFileObject(r.mediaFileList);l&&(e.adList[o].mediaType=l.mediaType)}e.adList[o].adType=r.adType?r.adType:"unknown",e.adList[o].vastLoaded=!0,e.adPool[o]=Object.assign({},r);var d=document.createEvent("Event");if(d.initEvent("adId_"+o,!1,!0),e.domRef.player.dispatchEvent(d),e.displayOptions.vastOptions.vastAdvanced.vastLoadedCallback(),e.hasTitle())document.getElementById(e.videoPlayerId+"_title").style.display="none"}else e.announceLocalError("101"),t.hasOwnProperty("fallbackVastTags")&&t.fallbackVastTags.length>0?(n=t.fallbackVastTags.shift(),e.processUrl(n,t,i)):("preRoll"===t.roll&&e.preRollFail(t),e.adList[o].error=!0)}))},e.processUrl=function(t,n,o){var i={tracking:[],stopTracking:[],impression:[],clicktracking:[],vastLoaded:!1,options:n.options||{}};e.resolveVastTag(t,0,i,o)},e.resolveVastTag=function(t,n,o,i){if(t&&""!==t){n<=e.displayOptions.vastOptions.maxAllowedVastTagRedirects&&e.sendRequest(t,!0,e.displayOptions.vastOptions.vastTimeout,(function(){var t=this,a=!1;if(4!==t.readyState||404!==t.status)if(4!==t.readyState||0!==t.status){if(4===t.readyState&&200===t.status)if(4!==t.readyState||200===t.status){try{a=t.responseXML}catch(e){return void i(!1)}if(a){if(e.inLineFound=e.hasInLine(a),!e.inLineFound&&e.hasVastAdTagUri(a)){var r=e.getVastAdTagUriFromWrapper(a);if(!r)return void i(!1);e.resolveVastTag(r,n,o,i)}n>e.displayOptions.vastOptions.maxAllowedVastTagRedirects&&!e.inLineFound?i(!1):e.processVastXml(a,o,i)}else i(!1)}else i(!1)}else i(!1);else i(!1)})),n++}else i(!1)},e.setVastList=function(){var t,n,o={},i={preRoll:[],postRoll:[],midRoll:[],onPauseRoll:[]},a={id:null,roll:null,played:!1,vastLoaded:!1,error:!1,adText:null,adTextPosition:null},r=0,l=function(e){var t=!1;return"midRoll"===e.roll&&void 0===e.timer&&(t=!0),t};if(e.displayOptions.vastOptions.hasOwnProperty("adList"))for(var d in e.displayOptions.vastOptions.adList){var s=e.displayOptions.vastOptions.adList[d];if(n=void 0,n=!1,(t=s).vastTag||(e.announceLocalError(102,'"vastTag" property is missing from adList.'),n=!0),t.roll||(e.announceLocalError(102,'"roll" is missing from adList.'),n=!0),-1===e.availableRolls.indexOf(t.roll)&&(e.announceLocalError(102,"Only "+e.availableRolls.join(",")+" rolls are supported."),n=!0),t.size&&-1===e.supportedNonLinearAd.indexOf(t.size)&&(e.announceLocalError(102,"Only "+e.supportedNonLinearAd.join(",")+" size are supported."),n=!0),n)e.announceLocalError(102,"Wrong adList parameters.");else{var u="ID"+r;o[u]=Object.assign({},a),o[u]=Object.assign(o[u],e.displayOptions.vastOptions.adList[d]),"midRoll"==s.roll&&(o[u].error=l("midRoll")),o[u].id=u,r++}}Object.keys(o).map((function(e){o[e].roll.toLowerCase()==="preRoll".toLowerCase()?i.preRoll.push(o[e]):o[e].roll.toLowerCase()==="midRoll".toLowerCase()?i.midRoll.push(o[e]):o[e].roll.toLowerCase()==="postRoll".toLowerCase()?i.postRoll.push(o[e]):o[e].roll.toLowerCase()==="onPauseRoll".toLowerCase()&&i.onPauseRoll.push(o[e])})),e.adGroupedByRolls=i,e.adList=o},e.onVastAdEnded=function(t){t&&t.stopImmediatePropagation(),e.deleteVastAdElements(),e.checkForNextAd()},e.vastLogoBehaviour=function(t){if(!e.displayOptions.layoutControls.logo.showOverAds){var n=document.getElementById(e.videoPlayerId+"_logo"),o=document.getElementById(e.videoPlayerId+"_logo_image");if(!n||!o)return;n.style.display=t?"none":"inline"}},e.deleteVastAdElements=function(){e.removeClickthrough(),e.removeSkipButton(),e.removeAdCountdown(),e.removeAdPlayingText(),e.removeCTAButton(),e.vastLogoBehaviour(!1)}},function(e,t){e.createCardboardJoystickButton=function(t){var n=document.getElementById(e.videoPlayerId+"_fluid_vr_joystick_panel"),o=document.createElement("div");return o.id=e.videoPlayerId+"_fluid_vr_joystick_"+t,o.className="fluid_vr_button fluid_vr_joystick_"+t,n.appendChild(o),o},e.cardboardRotateLeftRight=function(t){var n=e.vrROTATION_POSITION,o=-e.vrROTATION_POSITION,i={val:t<1?n:o};new TWEEN.Tween(i).to({val:0},e.vrROTATION_SPEED).easing(TWEEN.Easing.Quadratic.InOut).onUpdate((function(){e.vrViewer.OrbitControls.rotateLeft(i.val)})).start()},e.cardboardRotateUpDown=function(t){var n=e.vrROTATION_POSITION,o=-e.vrROTATION_POSITION,i={val:t<1?n:o};new TWEEN.Tween(i).to({val:0},e.vrROTATION_SPEED).easing(TWEEN.Easing.Quadratic.InOut).onUpdate((function(){e.vrViewer.OrbitControls.rotateUp(i.val)})).start()},e.createCardboardJoystick=function(){var t=document.getElementById(e.videoPlayerId+"_fluid_vr_container"),n=document.createElement("div");n.id=e.videoPlayerId+"_fluid_vr_joystick_panel",n.className="fluid_vr_joystick_panel",t.appendChild(n);var o=e.createCardboardJoystickButton("up"),i=e.createCardboardJoystickButton("left"),a=e.createCardboardJoystickButton("right"),r=e.createCardboardJoystickButton("down"),l=e.createCardboardJoystickButton("zoomdefault"),d=e.createCardboardJoystickButton("zoomin"),s=e.createCardboardJoystickButton("zoomout");o.addEventListener("click",(function(){e.cardboardRotateUpDown(1)})),r.addEventListener("click",(function(){e.cardboardRotateUpDown(0)})),a.addEventListener("click",(function(){e.cardboardRotateLeftRight(0)})),i.addEventListener("click",(function(){e.cardboardRotateLeftRight(1)})),l.addEventListener("click",(function(){e.vrViewer.camera.fov=60,e.vrViewer.camera.updateProjectionMatrix()})),s.addEventListener("click",(function(){e.vrViewer.camera.fov*=1.1,e.vrViewer.camera.updateProjectionMatrix()})),d.addEventListener("click",(function(){e.vrViewer.camera.fov*=.9,e.vrViewer.camera.updateProjectionMatrix()}))},e.cardBoardResize=function(){e.domRef.player.addEventListener("theatreModeOn",(function(){e.vrViewer.onWindowResize()})),e.domRef.player.addEventListener("theatreModeOff",(function(){e.vrViewer.onWindowResize()}))},e.cardBoardSwitchToNormal=function(){var t=document.getElementById(e.videoPlayerId+"_fluid_vr_joystick_panel"),n=document.getElementById(e.videoPlayerId+"_fluid_controls_container"),o=e.domRef.player;e.vrViewer.enableEffect(PANOLENS.MODES.NORMAL),e.vrViewer.onWindowResize(),e.vrMode=!1;var i=o.parentNode.getElementsByClassName("fluid_vr2_controls_container")[0];o.parentNode.removeChild(i),e.displayOptions.layoutControls.showCardBoardJoystick&&t&&(t.style.display="block"),n.classList.remove("fluid_vr_controls_container"),document.getElementById(e.videoPlayerId+"_fluid_control_volume_container").style.display="block";var a=document.getElementById("ad_countdown"+e.videoPlayerId),r=document.getElementById(e.videoPlayerId+"_fluid_cta"),l=document.getElementById(e.videoPlayerId+"_fluid_ad_playing"),d=document.getElementById("skip_button_"+e.videoPlayerId);a&&(a.style.display="block"),r&&(r.style.display="block"),l&&(l.style.display="block"),d&&(d.style.display="block")},e.cardBoardHideDefaultControls=function(){var t=document.getElementById(e.videoPlayerId+"_fluid_vr_joystick_panel"),n=document.getElementById(e.videoPlayerId+"_fluid_initial_play"),o=document.getElementById(e.videoPlayerId+"_fluid_control_volume_container");e.displayOptions.layoutControls.showCardBoardJoystick&&t&&(t.style.display="none"),n&&(document.getElementById(e.videoPlayerId+"_fluid_initial_play").style.display="none",document.getElementById(e.videoPlayerId+"_fluid_initial_play_button").style.opacity="1"),o.style.display="none"},e.cardBoardCreateVRControls=function(){var t=document.getElementById(e.videoPlayerId+"_fluid_controls_container").cloneNode(!0);t.removeAttribute("id"),t.querySelectorAll("*").forEach((function(e){e.removeAttribute("id")})),t.classList.add("fluid_vr2_controls_container"),e.domRef.player.parentNode.insertBefore(t,e.domRef.player.nextSibling),e.copyEvents(t)},e.cardBoardSwitchToVR=function(){var t=document.getElementById(e.videoPlayerId+"_fluid_controls_container");e.vrViewer.enableEffect(PANOLENS.MODES.CARDBOARD),e.vrViewer.onWindowResize(),e.vrViewer.disableReticleControl(),e.vrMode=!0,t.classList.add("fluid_vr_controls_container"),e.cardBoardHideDefaultControls(),e.cardBoardCreateVRControls();var n=document.getElementById("ad_countdown"+e.videoPlayerId),o=document.getElementById(e.videoPlayerId+"_fluid_cta"),i=document.getElementById(e.videoPlayerId+"_fluid_ad_playing"),a=document.getElementById("skip_button_"+e.videoPlayerId);n&&(n.style.display="none"),o&&(o.style.display="none"),i&&(i.style.display="none"),a&&(a.style.display="none")},e.cardBoardMoveTimeInfo=function(){var t=document.getElementById(e.videoPlayerId+"_fluid_control_duration"),n=document.getElementById(e.videoPlayerId+"_fluid_controls_container");t.classList.add("cardboard_time"),n.appendChild(t),e.controlDurationUpdate=function(){var t=e.formatTime(e.domRef.player.currentTime),n=e.formatTime(e.currentVideoDuration),o=e.domRef.player.parentNode.getElementsByClassName("fluid_control_duration"),i="";if(e.isCurrentlyPlayingAd){i="<span class='ad_timer_prefix'>AD : </span>"+t+" / "+n;for(var a=0;a<o.length;a++)o[a].classList.add("ad_timer_prefix")}else{i=t+" / "+n;for(var r=0;r<o.length;r++)o[r].classList.remove("ad_timer_prefix")}for(var l=0;l<o.length;l++)o[l].innerHTML=i}},e.cardBoardAlterDefaultControls=function(){e.cardBoardMoveTimeInfo()},e.createCardboardView=function(){var t=document.createElement("div");t.id=e.videoPlayerId+"_fluid_vr_container",t.className="fluid_vr_container",e.domRef.player.parentNode.insertBefore(t,e.domRef.player.nextSibling),PANOLENS.VideoPanorama.prototype.pauseVideo=function(){},PANOLENS.VideoPanorama.prototype.playVideo=function(){},e.vrPanorama=new PANOLENS.VideoPanorama("",{videoElement:e.domRef.player,autoplay:e.displayOptions.layoutControls.autoPlay,loop:!!e.displayOptions.layoutControls.loop}),e.vrViewer=new PANOLENS.Viewer({container:t,controlBar:!0,controlButtons:[],enableReticle:!1}),e.vrViewer.add(e.vrPanorama),e.vrViewer.enableEffect(PANOLENS.MODES.NORMAL),e.vrViewer.onWindowResize(),"Android"!==e.getMobileOs().userOs&&"iOS"!==e.getMobileOs().userOs||e.vrViewer.enableControl(1),e.cardBoardAlterDefaultControls(),e.cardBoardResize(),e.vrViewer.initialCameraPosition=JSON.parse(JSON.stringify(e.vrViewer.camera.position)),e.displayOptions.layoutControls.showCardBoardJoystick&&("Android"!==e.getMobileOs().userOs&&"iOS"!==e.getMobileOs().userOs&&e.createCardboardJoystick(),e.vrViewer.OrbitControls.noZoom=!0),e.trackEvent(e.domRef.player.parentNode,"click",".fluid_control_cardboard",(function(){e.vrMode?e.cardBoardSwitchToNormal():e.cardBoardSwitchToVR()}))},e.createCardboard=function(){e.displayOptions.layoutControls.showCardBoardView&&(document.getElementById(e.videoPlayerId+"_fluid_control_cardboard").style.display="inline-block",window.PANOLENS?e.createCardboardView():console.warn("three.js and panolens.js are not loaded"))}},function(e,t){e.subtitleFetchParse=function(t){e.sendRequest(t.url,!0,e.displayOptions.vastOptions.vastTimeout,(function(){var t=this;if((4!==t.readyState||200===t.status)&&4===t.readyState&&200===t.status){var n=t.responseText,o=new WebVTT.Parser(window,WebVTT.StringDecoder()),i=[];o.oncue=function(e){i.push(e)},o.onregion=function(e){},o.parse(n),o.flush(),e.subtitlesData=i}}))},e.createSubtitlesSwitch=function(){var t="OFF";if(e.subtitlesData=[],e.displayOptions.layoutControls.subtitlesEnabled){var n=[];n.push({label:t,url:"na",lang:t});var o=e.domRef.player.querySelectorAll("track");[].forEach.call(o,(function(e){"metadata"===e.kind&&e.src&&n.push({label:e.label,url:e.src,lang:e.srclang})})),e.subtitlesTracks=n;var i=document.getElementById(e.videoPlayerId+"_fluid_control_subtitles");i.style.display="inline-block";var a=!1,r=document.createElement("div");r.id=e.videoPlayerId+"_fluid_control_subtitles_list",r.className="fluid_subtitles_list",r.style.display="none";var l=!0;e.subtitlesTracks.forEach((function(n){var o=l?"subtitle_selected":"";l=!1;var i=document.createElement("div");i.id="subtitle_"+e.videoPlayerId+"_"+n.label,i.className="fluid_subtitle_list_item",i.innerHTML='<span class="subtitle_button_icon '+o+'"></span>'+n.label,i.addEventListener("click",(function(n){n.stopPropagation();for(var o=this,i=document.getElementsByClassName("subtitle_button_icon"),a=0;a<i.length;a++)i[a].className=i[a].className.replace("subtitle_selected","");o.firstChild.className+=" subtitle_selected",e.subtitlesTracks.forEach((function(n){n.label===o.innerText.replace(/(\r\n\t|\n|\r\t)/gm,"")&&(n.label===t?e.subtitlesData=[]:e.subtitleFetchParse(n))})),e.openCloseSubtitlesSwitch()})),r.appendChild(i),a=!0})),a?(i.appendChild(r),i.addEventListener("click",(function(){e.openCloseSubtitlesSwitch()}))):document.getElementById(e.videoPlayerId+"_fluid_control_subtitles").style.display="none";e.domRef.player.addEventListener("timeupdate",(function(){e.renderSubtitles()}))}else document.getElementById(e.videoPlayerId+"_fluid_control_subtitles").style.display="none"},e.renderSubtitles=function(){var t=e.domRef.player,n=Math.floor(t.currentTime),o=!1,i=document.getElementById(e.videoPlayerId+"_fluid_subtitles_container");if(e.isCurrentlyPlayingAd)i.innerHTML="";else{for(var a=0;a<e.subtitlesData.length;a++)n>=e.subtitlesData[a].startTime&&n<=e.subtitlesData[a].endTime&&(i.innerHTML="",i.appendChild(WebVTT.convertCueToDOMTree(window,e.subtitlesData[a].text)),o=!0);o||(i.innerHTML="")}},e.openCloseSubtitlesSwitch=function(){var t=document.getElementById(e.videoPlayerId+"_fluid_control_subtitles_list");if(e.isCurrentlyPlayingAd)t.style.display="none";else if("none"===t.style.display){t.style.display="block";t.addEventListener("mouseleave",(function e(n){t.removeEventListener("mouseleave",e),t.style.display="none"}))}else t.style.display="none"},e.createSubtitles=function(){var t=document.createElement("div");t.id=e.videoPlayerId+"_fluid_subtitles_container",t.className="fluid_subtitles_container",e.domRef.player.parentNode.insertBefore(t,e.domRef.player.nextSibling),e.displayOptions.layoutControls.subtitlesEnabled}},function(t,n){t.setupThumbnailPreviewVtt=function(){t.sendRequest(t.displayOptions.layoutControls.timelinePreview.file,!0,t.displayOptions.vastOptions.vastTimeout,(function(){var e=this;if((4!==e.readyState||200===e.status)&&4===e.readyState&&200===e.status){var n=e.responseText,o=(new window.WebVTTParser).parse(n);t.timelinePreviewData=function(e){if(void 0===e.cues||!e.cues.length)return[];for(var n=[],o=null,i=null,a=0;a<e.cues.length;a++){var r=0,l=0,d=122.5,s=69;2===(o=e.cues[a].text.split("#")).length&&0===o[1].indexOf("xywh=")&&4===(i=(i=o[1].substring(5)).split(",")).length&&(t.displayOptions.layoutControls.timelinePreview.spriteImage=!0,r=parseInt(i[0]),l=parseInt(i[1]),d=parseInt(i[2]),s=parseInt(i[3]));var u=void 0;!t.displayOptions.layoutControls.timelinePreview.spriteRelativePath||-1===t.displayOptions.layoutControls.timelinePreview.file.indexOf("/")||void 0!==t.displayOptions.layoutControls.timelinePreview.sprite&&""!==t.displayOptions.layoutControls.timelinePreview.sprite?u=t.displayOptions.layoutControls.timelinePreview.sprite?t.displayOptions.layoutControls.timelinePreview.sprite:o[0]:(u=t.displayOptions.layoutControls.timelinePreview.file.substring(0,t.displayOptions.layoutControls.timelinePreview.file.lastIndexOf("/")),u+="/"+o[0]),n.push({startTime:e.cues[a].startTime,endTime:e.cues[a].endTime,image:u,x:r,y:l,w:d,h:s})}return n}(o)}}))},t.generateTimelinePreviewTags=function(){var e=document.getElementById(t.videoPlayerId+"_fluid_controls_progress_container"),n=document.createElement("div");n.id=t.videoPlayerId+"_fluid_timeline_preview_container",n.className="fluid_timeline_preview_container",n.style.display="none",n.style.position="absolute",e.appendChild(n);var o=document.createElement("div");o.id=t.videoPlayerId+"_fluid_timeline_preview_container_shadow",o.className="fluid_timeline_preview_container_shadow",o.style.position="absolute",o.style.display="none",o.style.opacity=1,e.appendChild(o)},t.getThumbnailCoordinates=function(e){if(t.timelinePreviewData.length)for(var n=0;n<t.timelinePreviewData.length;n++)if(e>=t.timelinePreviewData[n].startTime&&e<=t.timelinePreviewData[n].endTime)return t.timelinePreviewData[n];return!1},t.drawTimelinePreview=function(e){var n=document.getElementById(t.videoPlayerId+"_fluid_timeline_preview_container"),o=document.getElementById(t.videoPlayerId+"_fluid_timeline_preview_container_shadow"),i=document.getElementById(t.videoPlayerId+"_fluid_controls_progress_container"),a=i.clientWidth;if(t.isCurrentlyPlayingAd)"none"!==n.style.display&&(n.style.display="none");else{var r=t.getEventOffsetX(e,i),l=null;if(a){l=t.currentVideoDuration*r/a;var d=t.getThumbnailCoordinates(l);o.style.width=a+"px",o.style.display="block",!1!==d?(n.style.width=d.w+"px",n.style.height=d.h+"px",o.style.height=d.h+"px",n.style.background="url("+d.image+") no-repeat scroll -"+d.x+"px -"+d.y+"px",n.style.left=r-d.w/2+"px",n.style.display="block",t.displayOptions.layoutControls.timelinePreview.spriteImage||(n.style.backgroundSize="contain")):n.style.display="none"}}},t.setupThumbnailPreview=function(){var n=t.displayOptions.layoutControls.timelinePreview;if(n&&n.type){var o="mousemove",i="mouseleave";if(t.mobileInfo.userOs&&(o="touchmove",i="touchend"),document.getElementById(t.videoPlayerId+"_fluid_controls_progress_container").addEventListener(o,t.drawTimelinePreview.bind(t),!1),document.getElementById(t.videoPlayerId+"_fluid_controls_progress_container").addEventListener(i,(function(e){var n=document.getElementById(t.videoPlayerId+"_fluid_controls_progress_container");void 0!==e.clientX&&n.contains(document.elementFromPoint(e.clientX,e.clientY))||(document.getElementById(t.videoPlayerId+"_fluid_timeline_preview_container").style.display="none",document.getElementById(t.videoPlayerId+"_fluid_timeline_preview_container_shadow").style.display="none")}),!1),t.generateTimelinePreviewTags(),"VTT"===n.type&&"string"==typeof n.file);else{if("static"!==n.type||"object"!==e(n.frames))throw"Invalid thumbnail-preview - type must be VTT or static";n.spriteImage=!0,t.timelinePreviewData=n.frames}t.showTimeOnHover=!1}}},function(e,t){var n="2.0";e.renderLinearAd=function(t,o){e.toggleLoader(!0),e.vastOptions=e.adPool[t],o&&e.backupMainVideoContentTime(t);!function(t){e.switchPlayerToVpaidMode=function(t){e.debugMessage("starting function switchPlayerToVpaidMode");var o=e.videoPlayerId+"_"+t+"_fluid_vpaid_iframe",i={};i.AdParameters=e.adPool[t].adParameters;var a=document.createElement("div");a.id=e.videoPlayerId+"_fluid_vpaid_slot",a.className="fluid_vpaid_slot",a.setAttribute("adListId",t),e.domRef.player.parentNode.insertBefore(a,o.nextSibling);var r={slot:a,videoSlot:e.domRef.player,videoSlotCanAutoPlay:!0},l=e.vpaidAdUnit.handshakeVersion(n);if(1===e.compareVersion(n,l))return e.adList[t].error=!0,e.playMainVideoWhenVpaidFails(403),!1;!1!==e.vastOptions.skipoffset&&e.addSkipButton(),e.domRef.player.loop=!1,e.domRef.player.removeAttribute("controls"),e.vpaidCallbackListenersAttach();var d=e.fullscreenMode?"fullscreen":"normal",s=e.domRef.player.offsetWidth,u=e.domRef.player.offsetHeight;e.vpaidAdUnit.initAd(s,u,d,3e3,i,r);for(var c=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress"),p=0;p<c.length;p++)c[p].style.backgroundColor=e.displayOptions.layoutControls.adProgressColor;e.toggleLoader(!1),e.adList[t].played=!0,e.adFinished=!1},e.switchPlayerToVastMode=function(){(e.vastOptions.duration||(e.vastOptions.duration=e.domRef.player.duration),e.displayOptions.layoutControls.showCardBoardView)?e.adList[t].landingPage?e.addCTAButton(e.adList[t].landingPage):e.addCTAButton(e.adPool[t].clickthroughUrl):((void 0!==e.adList[t].adClickable?e.adList[t].adClickable:e.displayOptions.vastOptions.adClickable)&&e.addClickthroughLayer(e.videoPlayerId),e.addCTAButton(e.adList[t].landingPage));!1!==e.vastOptions.skipoffset&&e.addSkipButton(),e.domRef.player.loop=!1,e.addAdCountdown(),e.domRef.player.removeAttribute("controls"),e.vastLogoBehaviour(!0);for(var n=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress"),o=0;o<n.length;o++)n[o].style.backgroundColor=e.displayOptions.layoutControls.adProgressColor;if(e.displayOptions.vastOptions.adText||e.adList[t].adText){var i=null!==e.adList[t].adText?e.adList[t].adText:e.displayOptions.vastOptions.adText;e.addAdPlayingText(i)}if(e.positionTextElements(e.adList[t]),e.toggleLoader(!1),e.adList[t].played=!0,e.adFinished=!1,e.domRef.player.play(),e.trackSingleEvent("impression"),e.domRef.player.removeEventListener("loadedmetadata",e.switchPlayerToVastMode),e.vrMode){var a=document.getElementById("ad_countdown"+e.videoPlayerId),r=document.getElementById(e.videoPlayerId+"_fluid_cta"),l=document.getElementById(e.videoPlayerId+"_fluid_ad_playing"),d=document.getElementById("skip_button_"+e.videoPlayerId);a&&(a.style.display="none"),r&&(r.style.display="none"),l&&(l.style.display="none"),d&&(d.style.display="none")}},e.domRef.player.pause(),e.detachStreamers();var o=e.getSupportedMediaFileObject(e.vastOptions.mediaFileList);if(e.displayOptions.layoutControls.showCardBoardView&&"360"!==e.adList[t].mediaType)return e.adList[t].error=!0,e.playMainVideoWhenVastFails(403),!1;if(e.vastOptions.vpaid)e.loadVpaid(t,o.src),e.displayOptions.vastOptions.showProgressbarMarkers&&e.hideAdMarkers();else{if(!1===o.src)return e.adList[t].error=!0,e.playMainVideoWhenVastFails(403),!1;e.domRef.player.addEventListener("loadedmetadata",e.switchPlayerToVastMode),e.domRef.player.src=o.src,e.isCurrentlyPlayingAd=!0,e.displayOptions.vastOptions.showProgressbarMarkers&&e.hideAdMarkers(),e.domRef.player.load(),e.domRef.player.addEventListener("ended",e.onVastAdEnded)}}(t),e.domRef.player.addEventListener("timeupdate",(function t(){if(e.adFinished)e.domRef.player.removeEventListener("timeupdate",t);else{var n=Math.floor(e.domRef.player.currentTime);0!==e.vastOptions.duration&&e.scheduleTrackingEvent(n,e.vastOptions.duration),n>=e.vastOptions.duration-1&&0!==e.vastOptions.duration&&(e.domRef.player.removeEventListener("timeupdate",t),e.adFinished=!0)}}))},e.playRoll=function(t){for(var n=0;n<t.length;n++){if(!e.adPool.hasOwnProperty(t[n]))return void e.announceLocalError(101);e.temporaryAdPods.push(e.adList[t[n]])}if(null===e.vastOptions||"linear"!==e.vastOptions.adType.toLowerCase()){var o=e.getNextAdPod();null!==o&&e.renderLinearAd(o,!0)}},e.backupMainVideoContentTime=function(t){switch(e.adList[t].roll){case"midRoll":e.domRef.player.mainVideoCurrentTime=e.domRef.player.currentTime-1;break;case"postRoll":e.domRef.player.mainVideoCurrentTime=e.mainVideoDuration,e.autoplayAfterAd=!1,e.domRef.player.currentTime=e.mainVideoDuration;break;case"preRoll":e.domRef.player.currentTime>0&&(e.domRef.player.mainVideoCurrentTime=e.domRef.player.currentTime-1)}},e.getSupportedMediaFileObject=function(t){var n=null,o=!1;if(t.length)for(var i=0;i<t.length;i++){if("VPAID"===t[i].apiFramework){n=t[i],o=!0;break}var a=e.getMediaFileTypeSupportLevel(t[i].type);if("maybe"!==a&&"probably"!==a||(n=t[i],o=!0),"probably"===a)break}return!1!==o&&n},e.getMediaFileTypeSupportLevel=function(e){if(null===e)return null;var t=document.createElement("video").canPlayType(e);return t||"no"},e.scheduleTrackingEvent=function(t,n){0===t&&e.trackSingleEvent("start"),void 0!==e.vastOptions.tracking.progress&&e.vastOptions.tracking.progress.length&&void 0!==e.vastOptions.tracking.progress[t]&&e.trackSingleEvent("progress",t),t===Math.floor(n/4)&&e.trackSingleEvent("firstQuartile"),t===Math.floor(n/2)&&e.trackSingleEvent("midpoint"),t===Math.floor(3*n/4)&&e.trackSingleEvent("thirdQuartile"),t>=n-1&&e.trackSingleEvent("complete")},e.trackSingleEvent=function(t,n){if(void 0!==e.vastOptions&&null!==e.vastOptions){var o=[];switch(o.length=0,t){case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":!1===e.vastOptions.stopTracking[t]&&(null!==e.vastOptions.tracking[t]&&(o=e.vastOptions.tracking[t]),e.vastOptions.stopTracking[t]=!0);break;case"progress":e.vastOptions.tracking.progress[n].elements.forEach((function(t,i){!1===e.vastOptions.tracking.progress[n].stopTracking&&e.vastOptions.tracking.progress[n].elements.length&&(o=e.vastOptions.tracking.progress[n].elements),e.vastOptions.tracking.progress[n].stopTracking=!0}));break;case"impression":void 0!==e.vastOptions.impression&&null!==e.vastOptions.impression&&void 0!==e.vastOptions.impression.length&&(o=e.vastOptions.impression)}e.callUris(o)}},e.completeNonLinearStatic=function(t){e.closeNonLinear(t),!1===e.adFinished&&(e.adFinished=!0,e.trackSingleEvent("complete")),clearInterval(e.nonLinearTracking)},e.createNonLinearStatic=function(t){if(e.adPool.hasOwnProperty(t)&&!0!==e.adPool[t].error){if(e.vastOptions=e.adPool[t],e.createBoard(t),!0!==e.adList[t].error){var n;e.adFinished=!1,e.vastOptions.vpaid||(e.trackSingleEvent("start"),n=e.adList[t].nonLinearDuration?e.adList[t].nonLinearDuration:e.vastOptions.duration,e.nonLinearTracking=setInterval((function(){if(!0!==e.adFinished){var t=Math.floor(e.domRef.player.currentTime);e.scheduleTrackingEvent(t,n),t>=n-1&&(e.adFinished=!0)}}),400));var o=parseInt(e.getCurrentTime())+parseInt(n);e.scheduleTask({time:o,closeStaticAd:t})}}else e.announceLocalError(101)},e.createVpaidNonLinearBoard=function(t){var o=e.adPool[t];e.loadVpaidNonlinearAssets=function(t){e.debugMessage("starting function switchPlayerToVpaidMode");var i=e.adList[t].vAlign?e.adList[t].vAlign:e.nonLinearVerticalAlign,a=e.adList[t].vpaidNonLinearCloseButton?e.adList[t].vpaidNonLinearCloseButton:e.vpaidNonLinearCloseButton,r=e.videoPlayerId+"_"+t+"_fluid_vpaid_iframe",l={};l.AdParameters=e.adPool[t].adParameters;var d=document.createElement("div");d.id="fluid_vpaidNonLinear_"+t,d.className="fluid_vpaidNonLinear_"+i,d.className+=" fluid_vpaidNonLinear_ad",d.setAttribute("adListId",t);var s=Math.min(468,e.domRef.player.offsetWidth),u=Math.min(60,Math.floor(e.domRef.player.offsetHeight/4));if(void 0!==e.adList[t].size){var c=e.adList[t].size.split("x");s=c[0],u=c[1]}else o.dimension.width&&o.dimension.height&&(s=o.dimension.width,u=o.dimension.height);if(d.style.width="100%",d.style.height=u+"px",a){var p=document.createElement("div");p.className="fluid_vpaidNonLinear_frame",p.style.width=s+"px",p.style.height=u+"px",d.appendChild(p);var m=document.createElement("div");m.id="close_button_"+e.videoPlayerId,m.className="close_button",m.innerHTML="",m.title=e.displayOptions.layoutControls.closeButtonCaption;var f=t;m.onclick=function(t){if(e.hardStopVpaidAd(""),void 0!==t.stopImmediatePropagation&&t.stopImmediatePropagation(),e.adFinished=!0,"onPauseRoll"===e.adList[f].roll&&e.onPauseRollAdPods[0]){var n=e.onPauseRollAdPods[0];e.createBoard(n),e.currentOnPauseRollAd=e.onPauseRollAdPods[0],delete e.onPauseRollAdPods[0]}return!1},p.appendChild(m)}var y=document.createElement("iframe");y.id=e.videoPlayerId+"non_linear_vapid_slot_iframe",y.className="fluid_vpaid_nonlinear_slot_iframe",y.setAttribute("width",s+"px"),y.setAttribute("height",u+"px"),y.setAttribute("sandbox","allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"),y.setAttribute("frameborder","0"),y.setAttribute("scrolling","no"),y.setAttribute("marginwidth","0"),y.setAttribute("marginheight","0"),d.appendChild(y),e.domRef.player.parentNode.insertBefore(d,r.nextSibling);var v=y.contentWindow.document.createElement("div");y.contentWindow.document.body.appendChild(v),e.vastOptions.slotIframe=y,e.vastOptions.slotFrame=undefined;var g={slot:v,videoSlot:e.domRef.player,videoSlotCanAutoPlay:!0};e.debugMessage(e.adList[t]);var h=e.vpaidAdUnit.handshakeVersion(n);if(1===e.compareVersion(n,h))return e.adList[t].error=!0,e.playMainVideoWhenVpaidFails(403),!1;e.domRef.player.loop=!1,e.domRef.player.removeAttribute("controls"),e.vpaidCallbackListenersAttach();var _=e.fullscreenMode?"fullscreen":"normal";e.vpaidAdUnit.initAd(s,u,_,3e3,l,g),e.toggleLoader(!1),e.adList[t].played=!0,e.adFinished=!1},e.loadVpaid(t,o.staticResource),e.debugMessage("create non linear vpaid")},e.createNonLinearBoard=function(t){var n=e.adPool[t];e.adList[t].played=!0;var o=e.domRef.player.clientWidth;e.domRef.player.clientHeight;var i=document.createElement("div"),a=e.adList[t].vAlign?e.adList[t].vAlign:e.nonLinearVerticalAlign,r=new Image;r.src=n.staticResource,r.id="fluid_nonLinear_imgCreative_"+t+"_"+e.videoPlayerId,r.onerror=function(){e.adList[t].error=!0,e.announceError(500)},r.onload=function(){var i,a,l,d;void 0!==e.adList[t].size?(i=e.adList[t].size.split("x")[0],a=e.adList[t].size.split("x")[1]):n.dimension.width&&n.dimension.height?(i=n.dimension.width,a=n.dimension.height):(i=r.width,a=r.height),i>o?d=a*(l=o-5)/i:(l=i,d=a),"onPauseRoll"!==e.adList[t].roll&&(document.getElementById("fluid_nonLinear_"+t).style.display="");var s=document.getElementById(r.id);s.width=l,s.height=d,e.trackSingleEvent("impression")},i.id="fluid_nonLinear_"+t,i.className="fluid_nonLinear_"+a,i.className+=" fluid_nonLinear_ad",i.innerHTML=r.outerHTML,i.style.display="none",i.onclick=function(){void 0!==n.clickthroughUrl&&window.open(n.clickthroughUrl),void 0!==n.clicktracking&&e.callUris([n.clicktracking])},void 0!==n.clickthroughUrl&&(i.style.cursor="pointer");var l=document.createElement("div");l.id="close_button_"+e.videoPlayerId,l.className="close_button",l.innerHTML="",l.title=e.displayOptions.layoutControls.closeButtonCaption;var d=t;l.onclick=function(t){if(this.parentElement.remove(),void 0!==t.stopImmediatePropagation&&t.stopImmediatePropagation(),e.adFinished=!0,clearInterval(e.nonLinearTracking),"onPauseRoll"===e.adList[d].roll&&e.onPauseRollAdPods[0]){var n=e.onPauseRollAdPods[0];e.createBoard(n),e.currentOnPauseRollAd=e.onPauseRollAdPods[0],delete e.onPauseRollAdPods[0]}return!1},i.appendChild(l),e.domRef.player.parentNode.insertBefore(i,e.domRef.player.nextSibling)},e.createBoard=function(t){var n=e.adPool[t];if(n.vpaid)e.hardStopVpaidAd(""),e.createVpaidNonLinearBoard(t);else{if(void 0===n.staticResource||-1===e.supportedStaticTypes.indexOf(n.creativeType))return e.adList[t].error=!0,void(e.vastOptions&&void 0!==e.vastOptions.errorUrl?e.announceError(503):e.announceLocalError(503));e.createNonLinearBoard(t)}},e.closeNonLinear=function(e){var t=document.getElementById("fluid_nonLinear_"+e);t&&t.remove()},e.rollGroupContainsLinear=function(t){for(var n=!1,o=0;o<t.length;o++)if(e.adList[t[o].id].adType&&"linear"===e.adList[t[o].id].adType){n=!0;break}return n},e.rollGroupContainsNonlinear=function(t){for(var n=!1,o=0;o<t.length;o++)if("nonlinear"===e.adList[t[o].id].adType.toLowerCase()){n=!0;break}return n},e.preRollFail=function(){var t=e.preRollAdPodsLength;e.preRollVastResolved++,e.preRollVastResolved===t&&e.preRollAdsPlay()},e.preRollSuccess=function(){var t=e.preRollAdPodsLength;e.preRollVastResolved++,e.preRollVastResolved===t&&e.preRollAdsPlay()},e.preRollAdsPlay=function(){var t=e.preRollAdPods,n={linear:[],nonLinear:[]};e.firstPlayLaunched=!0;for(var o=0;o<t.length;o++){if(!0===e.adList[t[o]].played)return;"linear"===e.adList[t[o]].adType&&n.linear.push(t[o]),"nonLinear"===e.adList[t[o]].adType&&(n.nonLinear.push(t[o]),e.scheduleTask({time:0,playRoll:"midRoll",adListId:n.nonLinear.shift()}))}n.linear.length>0?(e.toggleLoader(!0),e.playRoll(n.linear)):e.playMainVideoWhenVastFails(900)},e.preRoll=function(t){var n=t.vastObj;e.domRef.player.removeEventListener(t.type,e.preRoll);var o=[];o[0]=t.type.replace("adId_",""),!0!==e.adList[o[0]].played&&(e.preRollAdPods.push(o[0]),e.preRollSuccess(n))},e.createAdMarker=function(t,n){var o=document.getElementById(e.videoPlayerId+"_ad_markers_holder"),i=document.createElement("div");i.id="ad_marker_"+e.videoPlayerId+"_"+t,i.className="fluid_controls_ad_marker",i.style.left=n/e.mainVideoDuration*100+"%",e.isCurrentlyPlayingAd&&(i.style.display="none"),o.appendChild(i)},e.hideAdMarker=function(t){var n=document.getElementById("ad_marker_"+e.videoPlayerId+"_"+t);n&&(n.style.display="none")},e.showAdMarkers=function(){for(var t=document.getElementById(e.videoPlayerId+"_ad_markers_holder").getElementsByClassName("fluid_controls_ad_marker"),n="ad_marker_"+e.videoPlayerId+"_",o=0;o<t.length;++o){var i=t[o],a=i.id.replace(n,"");!1===e.adList[a].played&&(i.style.display="")}},e.hideAdMarkers=function(){for(var t=document.getElementById(e.videoPlayerId+"_ad_markers_holder").getElementsByClassName("fluid_controls_ad_marker"),n=0;n<t.length;++n){t[n].style.display="none"}},e.midRoll=function(t){e.domRef.player.removeEventListener(t.type,e.midRoll);var n=t.type.replace("adId_","");if(!0!==e.adList[n].played){var o=e.adList[n].timer;"string"==typeof o&&-1!==o.indexOf("%")&&(o=o.replace("%",""),o=Math.floor(e.mainVideoDuration/100*o)),e.displayOptions.vastOptions.showProgressbarMarkers&&"nonLinear"===e.adList[n].adType&&e.createAdMarker(n,o),e.scheduleTask({time:o,playRoll:"midRoll",adListId:n})}},e.postRoll=function(t){e.domRef.player.removeEventListener(t.type,e.postRoll);var n=t.type.replace("adId_","");e.scheduleTask({time:Math.floor(e.mainVideoDuration),playRoll:"postRoll",adListId:n})},e.onPauseRoll=function(t){e.domRef.player.removeEventListener(t.type,e.onPauseRoll);var n=t.type.replace("adId_","");if("nonLinear"===e.adList[n].adType){if(!e.adPool.hasOwnProperty(n)||!0===e.adPool[n].error)return void e.announceLocalError(101);if(document.getElementsByClassName("fluid_nonLinear_ad")[0])e.onPauseRollAdPods.push(n);else{e.createBoard(n),e.currentOnPauseRollAd=n;var o=document.getElementById("fluid_nonLinear_"+n);o&&(o.style.display="none")}}},e.hasValidOnPauseAd=function(){var t=e.findRoll("onPauseRoll");return 0!==t.length&&e.adList[t[0]]&&!1===e.adList[t[0]].error},e.toggleOnPauseAd=function(){if(e.hasValidOnPauseAd()&&!e.isCurrentlyPlayingAd){var t,n=e.findRoll("onPauseRoll");t=""!==e.currentOnPauseRollAd?e.currentOnPauseRollAd:n[0],e.vastOptions=e.adPool[t];var o=document.getElementById("fluid_nonLinear_"+t);o&&e.domRef.player.paused?setTimeout((function(){o.style.display="flex",e.adList[t].played=!1,e.trackingOnPauseNonLinearAd(t,"start")}),500):o&&!e.domRef.player.paused&&(o.style.display="none",e.adFinished=!0,e.trackingOnPauseNonLinearAd(t,"complete"))}},e.trackingOnPauseNonLinearAd=function(t,n){e.adPool.hasOwnProperty(t)&&!0!==e.adPool[t].error?(e.vastOptions=e.adPool[t],e.trackSingleEvent(n)):e.announceLocalError(101)},e.getLinearAdsFromKeyTime=function(t){for(var n=[],o=0;o<t.length;o++)!1===e.adList[t[o].adListId].played&&n.push(t[o].adListId);return n},e.adKeytimePlay=function(t){if(e.timerPool[t]&&!e.isCurrentlyPlayingAd){var n=e.timerPool[t].closeStaticAd.length,o=e.timerPool[t].linear.length,i=e.timerPool[t].nonLinear.length;if(0!==n||0!==o||0!==i){if(n>0){for(var a=0;a<n;a++){var r=e.timerPool[t].closeStaticAd[a].closeStaticAd;!0===e.adList[r].played&&e.completeNonLinearStatic(r)}e.timerPool[t].closeStaticAd=[]}if(o>0){var l=e.getLinearAdsFromKeyTime(e.timerPool[t].linear);if(l.length>0)return e.playRoll(l),void(e.timerPool[t].linear=[])}if(i>0)for(var d=0;d<i;d++){var s=e.timerPool[t].nonLinear[d].adListId;if(e.adPool[s],!1===e.adList[s].played&&!e.displayOptions.layoutControls.showCardBoardView)return e.createNonLinearStatic(s),e.displayOptions.vastOptions.showProgressbarMarkers&&e.hideAdMarker(s),void e.timerPool[t].nonLinear.splice(d,1)}}else delete e.timerPool[t]}},e.adTimer=function(){e.isTimer||(e.isTimer=!e.isTimer,e.timer=setInterval((function(){var t=Math.floor(e.getCurrentTime());e.adKeytimePlay(t)}),800))},e.scheduleTask=function(t){e.timerPool.hasOwnProperty(t.time)||(e.timerPool[t.time]={linear:[],nonLinear:[],closeStaticAd:[]}),t.hasOwnProperty("playRoll")&&"linear"===e.adList[t.adListId].adType?e.timerPool[t.time].linear.push(t):t.hasOwnProperty("playRoll")&&"nonLinear"===e.adList[t.adListId].adType?e.timerPool[t.time].nonLinear.push(t):t.hasOwnProperty("closeStaticAd")&&e.timerPool[t.time].closeStaticAd.push(t)},e.switchToMainVideo=function(){e.debugMessage("starting main video"),e.domRef.player.src=e.originalSrc,e.initialiseStreamers();var t=void 0!==e.domRef.player.mainVideoCurrentTime?e.domRef.player.mainVideoCurrentTime:0;if(e.domRef.player.hasOwnProperty("currentTime")&&(e.domRef.player.currentTime=t),e.displayOptions.layoutControls.loop&&(e.domRef.player.loop=!0),e.setCurrentTimeAndPlay(t,e.autoplayAfterAd),e.isCurrentlyPlayingAd=!1,e.deleteVastAdElements(),e.adFinished=!0,e.displayOptions.vastOptions.vastAdvanced.vastVideoEndedCallback(),e.vastOptions=null,e.setBuffering(),null!==document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container"))for(var n=e.displayOptions.layoutControls.primaryColor?e.displayOptions.layoutControls.primaryColor:"white",o=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress"),i=0;i<o.length;i++)o[i].style.backgroundColor=n;(e.domRef.player.removeEventListener("ended",e.onVastAdEnded),e.displayOptions.vastOptions.showProgressbarMarkers&&e.showAdMarkers(),e.hasTitle())&&(document.getElementById(e.videoPlayerId+"_title").style.display="inline")},e.getNextAdPod=function(){var t=null;e.temporaryAdPods.length>0&&(t=e.temporaryAdPods.shift().id);return t},e.checkForNextAd=function(){var t=e.getNextAdPod();null===t?(e.switchToMainVideo(),e.vastOptions=null,e.adFinished=!0):(e.domRef.player.removeEventListener("ended",e.onVastAdEnded),e.isCurrentlyPlayingAd=!1,e.vastOptions=null,e.adFinished=!0,e.renderLinearAd(t,!1))},e.addSkipButton=function(){var t=document.createElement("div");t.id="skip_button_"+e.videoPlayerId,t.className="skip_button skip_button_disabled",t.innerHTML=e.displayOptions.vastOptions.skipButtonCaption.replace("[seconds]",e.vastOptions.skipoffset),document.getElementById("fluid_video_wrapper_"+e.videoPlayerId).appendChild(t),e.domRef.player.addEventListener("timeupdate",e.decreaseSkipOffset,!1)},e.addAdCountdown=function(){var t=document.getElementById("fluid_video_wrapper_"+e.videoPlayerId),n=document.createElement("div"),o=e.pad(parseInt(e.currentVideoDuration/60))+":"+e.pad(parseInt(e.currentVideoDuration%60)),i=parseInt(o);n.id="ad_countdown"+e.videoPlayerId,n.className="ad_countdown",n.innerHTML="<span class='ad_timer_prefix'>Ad - </span>"+i,t.appendChild(n),e.domRef.player.addEventListener("timeupdate",e.decreaseAdCountdown,!1),t.addEventListener("mouseover",(function(){n.style.display="none"}),!1)},e.decreaseAdCountdown=function(){var t=parseInt(e.currentVideoDuration)-parseInt(e.domRef.player.currentTime),n=document.getElementById("ad_countdown"+e.videoPlayerId);n?n.innerHTML="<span class='ad_timer_prefix'>Ad - </span> "+e.pad(parseInt(t/60))+":"+e.pad(parseInt(t%60)):e.domRef.player.removeEventListener("timeupdate",e.decreaseAdCountdown)},e.removeAdCountdown=function(){var t=document.getElementById("ad_countdown"+e.videoPlayerId);t&&t.parentElement.removeChild(t)},e.toggleAdCountdown=function(t){var n=document.getElementById("ad_countdown"+e.videoPlayerId);n&&(n.style.display=t?"inline-block":"none")},e.addAdPlayingText=function(t){var n=document.createElement("div");n.id=e.videoPlayerId+"_fluid_ad_playing",e.displayOptions.layoutControls.primaryColor&&(n.style.backgroundColor=e.displayOptions.layoutControls.primaryColor,n.style.opacity=1),n.className="fluid_ad_playing",n.innerText=t,document.getElementById("fluid_video_wrapper_"+e.videoPlayerId).appendChild(n)},e.positionTextElements=function(t){var n,o,i,a=["top left","top right","bottom left","bottom right"],r=document.getElementById("skip_button_"+e.videoPlayerId),l=document.getElementById(e.videoPlayerId+"_fluid_ad_playing"),d=document.getElementById(e.videoPlayerId+"_fluid_cta"),s=0,u=0,c=!1,p=0,m=[],f={top:{left:{h:34,v:34},right:{h:0,v:34}},bottom:{left:{h:34,v:50},right:{h:0,v:50}}};null!==r&&(p=r.offsetHeight+8,e.domRef.wrapper.classList.contains("mobile")&&(f.bottom.left.v=75,f.bottom.right.v=75));null!==d&&(n=e.displayOptions.vastOptions.adCTATextPosition.toLowerCase(),-1===a.indexOf(n)&&(console.log('[FP Error] Invalid position for CTAText. Reverting to "bottom right"'),n="bottom right"),c="bottom"===(m=n.split(" "))[0],d.style[m[0]]=f[m[0]][m[1]].v+"px",d.style[m[1]]=f[m[0]][m[1]].h+"px",c&&"right"===m[1]&&(d.style[m[0]]=f[m[0]][m[1]].v+p+"px"),s=d.offsetHeight+8+"px"),null!==l&&(o=null!==t.adTextPosition?t.adTextPosition.toLowerCase():e.displayOptions.vastOptions.adTextPosition.toLowerCase(),-1===a.indexOf(o)&&(console.log('[FP Error] Invalid position for adText. Reverting to "top left"'),o="top left"),i=o.split(" "),l.style[i[0]]=f[i[0]][i[1]].v+"px",l.style[i[1]]=f[i[0]][i[1]].h+"px",u=l.offsetHeight+8+"px"),s>0&&u>0&&n===o&&(c?"right"===m[1]?l.style.bottom=f[i[0]][i[1]].v+p+s+"px":l.style.bottom=f[i[0]][i[1]].v+s+"px":d.style.top=f[m[0]][m[1]].v+u+"px")},e.removeAdPlayingText=function(){var t=document.getElementById(e.videoPlayerId+"_fluid_ad_playing");t&&t.parentElement.removeChild(t)},e.addCTAButton=function(t){if(t){var n=document.createElement("div");n.id=e.videoPlayerId+"_fluid_cta",n.className="fluid_ad_cta";var o=document.createElement("span");o.innerHTML=e.displayOptions.vastOptions.adCTAText+'<br/><span class="add_icon_clickthrough">'+t+"</span>",n.addEventListener("click",(function(){return e.domRef.player.paused||e.domRef.player.pause(),window.open(e.vastOptions.clickthroughUrl,"_blank").focus(),!0}),!1),n.appendChild(o),document.getElementById("fluid_video_wrapper_"+e.videoPlayerId).appendChild(n)}},e.removeCTAButton=function(){var t=document.getElementById(e.videoPlayerId+"_fluid_cta");t&&t.parentElement.removeChild(t)},e.decreaseSkipOffset=function(){var t=e.vastOptions.skipoffset-Math.floor(e.domRef.player.currentTime),n=document.getElementById("skip_button_"+e.videoPlayerId);if(n)if(t>=1)n.innerHTML=e.displayOptions.vastOptions.skipButtonCaption.replace("[seconds]",t);else{var o=document.createElement("a");o.href="#",o.id="skipHref_"+e.videoPlayerId,o.innerHTML=e.displayOptions.vastOptions.skipButtonClickCaption,o.onclick=function(t){t.preventDefault(),t.stopPropagation(),e.pressSkipButton()},n.innerHTML="",n.appendChild(o),n.className=n.className.replace(/\bskip_button_disabled\b/,""),e.domRef.player.removeEventListener("timeupdate",e.decreaseSkipOffset)}else e.domRef.player.removeEventListener("timeupdate",e.decreaseSkipOffset)},e.pressSkipButton=function(){if(e.removeSkipButton(),e.removeAdPlayingText(),e.removeCTAButton(),e.vastOptions.vpaid)e.skipVpaidAd();else{e.displayOptions.vastOptions.vastAdvanced.vastVideoSkippedCallback();var t=document.createEvent("Event");t.initEvent("ended",!1,!0),e.domRef.player.dispatchEvent(t)}},e.removeSkipButton=function(){var t=document.getElementById("skip_button_"+e.videoPlayerId);t&&t.parentElement.removeChild(t)},e.addClickthroughLayer=function(){var t=e.domRef.wrapper,n=document.createElement("div");n.className="vast_clickthrough_layer",n.id="vast_clickthrough_layer_"+e.videoPlayerId,n.setAttribute("style","position: absolute; cursor: pointer; top: 0; left: 0; width: "+e.domRef.player.offsetWidth+"px; height: "+e.domRef.player.offsetHeight+"px;"),t.appendChild(n);var o=function(){window.open(e.vastOptions.clickthroughUrl),void 0!==e.vastOptions.clicktracking&&e.callUris(e.vastOptions.clicktracking)},i=document.getElementById("vast_clickthrough_layer_"+e.videoPlayerId),a="iPhone"===e.mobileInfo.device&&!1!==e.mobileInfo.userOsMajor&&e.mobileInfo.userOsMajor<=9;i.onclick=function(){e.domRef.player.paused?a&&!e.suppressClickthrough?(o(),e.suppressClickthrough=!0):e.domRef.player.play():(o(),e.domRef.player.pause())}},e.removeClickthrough=function(){var t=document.getElementById("vast_clickthrough_layer_"+e.videoPlayerId);t&&t.parentNode.removeChild(t)}},function(e,t){e.initialiseStreamers=function(){switch(e.detachStreamers(),e.displayOptions.layoutControls.mediaType){case"application/dash+xml":e.dashScriptLoaded||window.dashjs&&!window.dashjs.isDefaultSubject?e.initialiseDash():console.warn("dashjs is not loaded");break;case"application/x-mpegurl":e.hlsScriptLoaded||window.Hls?e.initialiseHls():console.warn("Hls is not loaded")}},e.initialiseDash=function(){if("function"==typeof(window.MediaSource||window.WebKitMediaSource)){var t=e.autoplayAfterAd?e.displayOptions.layoutControls.autoPlay:e.autoplayAfterAd,n={debug:{logLevel:dashjs.Debug.LOG_LEVEL_FATAL}},o=dashjs.MediaPlayer().create(),i=e.displayOptions.modules.configureDash(n);o.updateSettings(i),e.displayOptions.modules.onBeforeInitDash(o),o.initialize(e.domRef.player,e.originalSrc,t),o.on("streamInitializing",(function(){e.toggleLoader(!0)})),o.on("canPlay",(function(){e.toggleLoader(!1)})),o.on("playbackPlaying",(function(){e.toggleLoader(!1)})),e.displayOptions.modules.onAfterInitDash(o),e.dashPlayer=o}else e.nextSource(),console.log("[FP_WARNING] Media type not supported by this browser using DASH.js. (application/dash+xml)")},e.initialiseHls=function(){if(Hls.isSupported()){var t=e.displayOptions.modules.configureHls({debug:!1,p2pConfig:{logLevel:!1},enableWebVTT:!1,enableCEA708Captions:!1}),n=new Hls(t);e.displayOptions.modules.onBeforeInitHls(n),n.attachMedia(e.domRef.player),n.loadSource(e.originalSrc),e.displayOptions.modules.onAfterInitHls(n),e.hlsPlayer=n,!e.firstPlayLaunched&&e.displayOptions.layoutControls.autoPlay&&e.domRef.player.play()}else e.nextSource(),console.log("[FP_WARNING] Media type not supported by this browser using HLS.js. (application/x-mpegURL)")},e.detachStreamers=function(){e.dashPlayer?(e.dashPlayer.reset(),e.dashPlayer=!1):e.hlsPlayer&&(e.hlsPlayer.detachMedia(),e.hlsPlayer=!1)}},function(e,t){e.isTouchDevice=function(){return!(!("ontouchstart"in window)&&!navigator.maxTouchPoints)},e.getMobileOs=function(){var e,t=navigator.userAgent||"",n={device:!1,userOs:!1,userOsVer:!1,userOsMajor:!1};if(t.match(/Android/i)?(n.userOs="Android",e=t.indexOf("Android ")):t.match(/iPhone/i)?(n.device="iPhone",n.userOs="iOS",e=t.indexOf("OS ")):t.match(/iPad/i)?(n.device="iPad",n.userOs="iOS",e=t.indexOf("OS ")):n.userOs=!1,"iOS"===n.userOs&&e>-1){var o=t.substr(e+3);-1!==o.indexOf(" ")&&(n.userOsVer=o.substring(0,o.indexOf(" ")).replace(/_/g,"."),n.userOsMajor=parseInt(n.userOsVer))}else"Android"===n.userOs&&e>-1?n.userOsVer=t.substr(e+8,3):n.userOsVer=!1;return n},e.getBrowserVersion=function(){var e,t,n=navigator.userAgent||"",o={browserName:!1,fullVersion:!1,majorVersion:!1,userOsMajor:!1};try{o.browserName=navigator.appName,-1!==(e=n.indexOf("OPR/"))?(o.browserName="Opera",o.fullVersion=n.substring(e+4)):-1!==(e=n.indexOf("Opera"))?(o.browserName="Opera",o.fullVersion=n.substring(e+6),-1!==(e=n.indexOf("Version"))&&(o.fullVersion=n.substring(e+8))):-1!==(e=n.indexOf("MSIE"))?(o.browserName="Microsoft Internet Explorer",o.fullVersion=n.substring(e+5)):-1!==(e=n.indexOf("Chrome"))?(o.browserName="Google Chrome",o.fullVersion=n.substring(e+7)):-1!==(e=n.indexOf("Safari"))?(o.browserName="Safari",o.fullVersion=n.substring(e+7),-1!==(e=n.indexOf("Version"))&&(o.fullVersion=n.substring(e+8))):-1!==(e=n.indexOf("Firefox"))?(o.browserName="Mozilla Firefox",o.fullVersion=n.substring(e+8)):(t=n.lastIndexOf(" ")+1)<(e=n.lastIndexOf("/"))&&(o.browserName=n.substring(t,e),o.fullVersion=n.substring(e+1),o.browserName.toLowerCase()===o.browserName.toUpperCase()&&(o.browserName=navigator.appName)),-1!==(t=o.fullVersion.indexOf(";"))&&(o.fullVersion=o.fullVersion.substring(0,t)),-1!==(t=o.fullVersion.indexOf(" "))&&(o.fullVersion=o.fullVersion.substring(0,t)),o.majorVersion=parseInt(""+o.fullVersion,10),isNaN(o.majorVersion)&&(o.fullVersion=""+parseFloat(navigator.appVersion),o.majorVersion=parseInt(navigator.appVersion,10))}catch(e){}return o},e.compareVersion=function(e,t){if("string"!=typeof e)return!1;if("string"!=typeof t)return!1;e=e.split("."),t=t.split(".");for(var n=Math.min(e.length,t.length),o=0;o<n;++o){if(e[o]=parseInt(e[o],10),t[o]=parseInt(t[o],10),e[o]>t[o])return 1;if(e[o]<t[o])return-1}return e.length===t.length?0:e.length<t.length?-1:1},e.convertTimeStringToSeconds=function(e){if(!e||!e.match(/^(\d){2}(:[0-5][0-9]){2}(.(\d){1,3})?$/))return!1;var t=e.split(":");return 3600*parseInt(t[0],10)+60*parseInt(t[1],10)+parseInt(t[2],10)},e.formatTime=function(t){var n=new Date(1e3*t),o=e.pad(n.getUTCHours()),i=e.pad(n.getUTCMinutes()),a=e.pad(n.getSeconds());return o>=1?o+":"+i+":"+a:i+":"+a},e.pad=function(e){return e<10?"0"+e:e}}],l=0,d=function(){var t=this,o=this;o.domRef={player:null},o.destructors=[],o.init=function(t,i){var a,d,s={development:false,debug:false},u=n(r);try{for(u.s();!(a=u.n()).done;){(0,a.value)(o,s)}}catch(e){u.e(e)}finally{u.f()}if(t instanceof HTMLVideoElement)d=t,t.id||(t.id="fluid_player_instance_"+(l++).toString());else{if(!("string"==typeof t||t instanceof String))throw"Invalid initializer - player target must be HTMLVideoElement or ID";d=document.getElementById(t)}if(!d)throw"Could not find a HTML node to attach to for target "+t+'"';for(var c in d.setAttribute("playsinline",""),d.setAttribute("webkit-playsinline",""),o.domRef.player=d,o.vrROTATION_POSITION=.1,o.vrROTATION_SPEED=80,o.vrMode=!1,o.vrPanorama=null,o.vrViewer=null,o.vpaidTimer=null,o.vpaidAdUnit=null,o.vastOptions=null,o.videoPlayerId=d.id,o.originalSrc=o.getCurrentSrc(),o.isCurrentlyPlayingAd=!1,o.recentWaiting=!1,o.latestVolume=1,o.currentVideoDuration=0,o.firstPlayLaunched=!1,o.suppressClickthrough=!1,o.timelinePreviewData=[],o.mainVideoCurrentTime=0,o.mainVideoDuration=0,o.isTimer=!1,o.timer=null,o.timerPool={},o.adList={},o.adPool={},o.adGroupedByRolls={},o.onPauseRollAdPods=[],o.currentOnPauseRollAd="",o.preRollAdsResolved=!1,o.preRollAdPods=[],o.preRollAdPodsLength=0,o.preRollVastResolved=0,o.temporaryAdPods=[],o.availableRolls=["preRoll","midRoll","postRoll","onPauseRoll"],o.supportedNonLinearAd=["300x250","468x60","728x90"],o.autoplayAfterAd=!0,o.nonLinearDuration=15,o.supportedStaticTypes=["image/gif","image/jpeg","image/png"],o.inactivityTimeout=null,o.isUserActive=null,o.nonLinearVerticalAlign="bottom",o.vpaidNonLinearCloseButton=!0,o.showTimeOnHover=!0,o.initialAnimationSet=!0,o.theatreMode=!1,o.theatreModeAdvanced=!1,o.fullscreenMode=!1,o.originalWidth=d.offsetWidth,o.originalHeight=d.offsetHeight,o.dashPlayer=!1,o.hlsPlayer=!1,o.dashScriptLoaded=!1,o.hlsScriptLoaded=!1,o.isPlayingMedia=!1,o.isSwitchingSource=!1,o.isLoading=!1,o.isInIframe=o.inIframe(),o.mainVideoReadyState=!1,o.xmlCollection=[],o.inLineFound=null,o.fluidStorage={},o.fluidPseudoPause=!1,o.mobileInfo=o.getMobileOs(),o.events={},o.displayOptions={layoutControls:{mediaType:o.getCurrentSrcType(),primaryColor:!1,posterImage:!1,posterImageSize:"contain",adProgressColor:"#f9d300",playButtonShowing:!0,playPauseAnimation:!0,closeButtonCaption:"Close",fillToContainer:!1,autoPlay:!1,preload:"auto",mute:!1,loop:null,keyboardControl:!0,allowDownload:!1,playbackRateEnabled:!1,subtitlesEnabled:!1,showCardBoardView:!1,showCardBoardJoystick:!1,allowTheatre:!0,doubleclickFullscreen:!0,theatreSettings:{width:"100%",height:"60%",marginTop:0,horizontalAlign:"center",keepPosition:!1},theatreAdvanced:!1,title:null,logo:{imageUrl:null,position:"top left",clickUrl:null,opacity:1,mouseOverImageUrl:null,imageMargin:"2px",hideWithControls:!1,showOverAds:!1},controlBar:{autoHide:!1,autoHideTimeout:3,animated:!0},timelinePreview:{spriteImage:!1,spriteRelativePath:!1},htmlOnPauseBlock:{html:null,height:null,width:null},layout:"default",playerInitCallback:function(){},persistentSettings:{volume:!0,quality:!0,speed:!0,theatre:!0},controlForwardBackward:{show:!1},contextMenu:{controls:!0,links:[]}},vastOptions:{adList:{},skipButtonCaption:"Skip ad in [seconds]",skipButtonClickCaption:'Skip Ad <span class="skip_button_icon"></span>',adText:null,adTextPosition:"top left",adCTAText:"Visit now!",adCTATextPosition:"bottom right",adClickable:!0,vastTimeout:5e3,showProgressbarMarkers:!1,allowVPAID:!1,showPlayButton:!1,maxAllowedVastTagRedirects:3,vpaidTimeout:3e3,vastAdvanced:{vastLoadedCallback:function(){},noVastVideoCallback:function(){},vastVideoSkippedCallback:function(){},vastVideoEndedCallback:function(){}}},captions:{play:"Play",pause:"Pause",mute:"Mute",unmute:"Unmute",fullscreen:"Fullscreen",subtitles:"Subtitles",exitFullscreen:"Exit Fullscreen"},debug:false,modules:{configureHls:function(e){return e},onBeforeInitHls:function(e){},onAfterInitHls:function(e){},configureDash:function(e){return e},onBeforeInitDash:function(e){},onAfterInitDash:function(e){}},onBeforeXMLHttpRequestOpen:function(e){},onBeforeXMLHttpRequest:function(e){}},i.hlsjsConfig&&console.error("[FP_ERROR] player option hlsjsConfig is removed and has no effect. Use module callbacks instead!"),i)if(i.hasOwnProperty(c))if("object"==e(i[c]))for(var p in i[c])i[c].hasOwnProperty(p)&&(o.displayOptions[c][p]=i[c][p]);else o.displayOptions[c]=i[c];o.domRef.wrapper=o.setupPlayerWrapper(),d.addEventListener("webkitfullscreenchange",o.recalculateAdDimensions),d.addEventListener("fullscreenchange",o.recalculateAdDimensions),d.addEventListener("waiting",o.onRecentWaiting),d.addEventListener("pause",o.onFluidPlayerPause),d.addEventListener("loadedmetadata",o.mainVideoReady),d.addEventListener("error",o.onErrorDetection),d.addEventListener("ended",o.onMainVideoEnded),d.addEventListener("durationchange",(function(){o.currentVideoDuration=o.getCurrentVideoDuration()})),o.displayOptions.layoutControls.showCardBoardView&&d.setAttribute("crossOrigin","anonymous"),o.currentVideoDuration=o.getCurrentVideoDuration(),!isNaN(o.currentVideoDuration)&&isFinite(o.currentVideoDuration)||(o.currentVideoDuration=0),o.setLayout(),o.latestVolume=d.volume,o.initialAnimationSet=o.displayOptions.layoutControls.playPauseAnimation,o.handleFullscreen(),o.initLogo(),o.initTitle(),o.initMute(),o.initLoop(),o.displayOptions.layoutControls.playerInitCallback(),o.createVideoSourceSwitch(),o.createSubtitles(),o.createCardboard(),o.userActivityChecker(),o.setVastList(),o.setPersistentSettings();var m=o.findRoll("preRoll");m&&0!==m.length||o.initialiseStreamers();var f=d.play;d.play=function(){var e=null;o.displayOptions.layoutControls.showCardBoardView&&"undefined"!=typeof DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission&&DeviceOrientationEvent.requestPermission().then((function(e){"granted"===e&&o.debugMessage("DeviceOrientationEvent permission granted!")})).catch(console.error);try{return null!=(e=f.apply(this,arguments))&&(e.then((function(){o.isPlayingMedia=!0,clearTimeout(o.promiseTimeout)})).catch((function(e){console.error("[FP_ERROR] Playback error",e),void 0!==e.name&&"AbortError"===e.name||o.announceLocalError(202,"Failed to play video."),clearTimeout(o.promiseTimeout)})),o.promiseTimeout=setTimeout((function(){!1===o.isPlayingMedia&&o.announceLocalError(204,"[FP_ERROR] Timeout error. Failed to play video?")}),5e3)),e}catch(e){console.error("[FP_ERROR] Playback error",e),o.announceLocalError(201,"Failed to play video.")}};var y=d.pause;if(d.pause=function(){if(!0===o.isPlayingMedia)return o.isPlayingMedia=!1,y.apply(this,arguments);if(o.isCurrentlyPlayingVideo(o.domRef.player))try{return o.isPlayingMedia=!1,y.apply(this,arguments)}catch(e){o.announceLocalError(203,"Failed to play video.")}},o.displayOptions.layoutControls.autoPlay&&!o.dashScriptLoaded&&!o.hlsScriptLoaded){if("Safari"===o.getBrowserVersion().browserName)return;d.play()}var v=document.getElementById("fluid_video_wrapper_"+d.id);o.mobileInfo.userOs?(o.hideControlBar(),v.addEventListener("touchstart",o.showControlBar,!1)):(v.addEventListener("mouseleave",o.handleMouseleave,!1),v.addEventListener("mouseenter",o.showControlBar,!1),v.addEventListener("mouseenter",o.showTitle,!1)),o.displayOptions.layoutControls.keyboardControl&&o.keyboardControl(),o.displayOptions.layoutControls.controlBar.autoHide&&o.linkControlBarUserActivity();try{if(o.domRef.player.textTracks){var g,h=n(o.domRef.player.textTracks);try{for(h.s();!(g=h.n()).done;){g.value.mode="hidden"}}catch(e){h.e(e)}finally{h.f()}}}catch(e){}},o.getCurrentVideoDuration=function(){return o.domRef.player?o.domRef.player.duration:0},o.toggleLoader=function(e){o.isLoading=!!e,document.getElementById("vast_video_loading_"+o.videoPlayerId).style.display=e?"table":"none"},o.sendRequest=function(e,t,n,i){var a=new XMLHttpRequest;a.onreadystatechange=i,o.displayOptions.onBeforeXMLHttpRequestOpen(a),a.open("GET",e,!0),a.withCredentials=t,a.timeout=n,o.displayOptions.onBeforeXMLHttpRequest(a),a.send()},o.announceLocalError=function(e,t){var n="[Error] ("+(void 0!==e?parseInt(e):900)+"): ";n+=t||"Failed to load Vast",console.warn(n)},o.debugMessage=function(e){o.displayOptions.debug&&console.log(e)},o.onMainVideoEnded=function(e){o.debugMessage("onMainVideoEnded is called"),o.isCurrentlyPlayingAd&&o.autoplayAfterAd||(Math.floor(o.getCurrentTime())>=Math.floor(o.mainVideoDuration)&&(o.adKeytimePlay(Math.floor(o.mainVideoDuration)),clearInterval(o.timer)),o.displayOptions.layoutControls.loop&&(o.switchToMainVideo(),o.playPauseToggle()))},o.getCurrentTime=function(){return o.isCurrentlyPlayingAd?o.mainVideoCurrentTime:o.domRef.player.currentTime},o.getCurrentSrc=function(){var e=o.domRef.player.getElementsByTagName("source");return e.length?e[0].getAttribute("src"):null},o.getCurrentSrcType=function(){var e=o.domRef.player.getElementsByTagName("source");if(!e.length)return null;for(var t=0;t<e.length;t++)if(e[t].getAttribute("src")===o.originalSrc)return e[t].getAttribute("type").toLowerCase();return null},o.onRecentWaiting=function(){o.recentWaiting=!0,setTimeout((function(){o.recentWaiting=!1}),1e3)},o.onFluidPlayerPause=function(){setTimeout((function(){if(!o.recentWaiting){var e=document.createEvent("CustomEvent");e.initEvent("fluidplayerpause",!1,!0),o.domRef.player.dispatchEvent(e)}}),100)},o.checkShouldDisplayVolumeBar=function(){return"iOS"!==o.getMobileOs().userOs},o.generateCustomControlTags=function(e){var t={};return t.loader=document.createElement("div"),t.loader.className="vast_video_loading",t.loader.id="vast_video_loading_"+o.videoPlayerId,t.loader.style.display="none",t.root=document.createElement("div"),t.root.className="fluid_controls_container",t.root.id=o.videoPlayerId+"_fluid_controls_container",e.displayVolumeBar||(t.root.className=t.root.className+" no_volume_bar"),e.controlForwardBackward&&(t.root.className=t.root.className+" skip_controls"),t.leftContainer=document.createElement("div"),t.leftContainer.className="fluid_controls_left",t.root.appendChild(t.leftContainer),t.playPause=document.createElement("div"),t.playPause.className="fluid_button fluid_button_play fluid_control_playpause",t.playPause.id=o.videoPlayerId+"_fluid_control_playpause",t.leftContainer.appendChild(t.playPause),e.controlForwardBackward&&(t.skipBack=document.createElement("div"),t.skipBack.className="fluid_button fluid_button_skip_back",t.skipBack.id=o.videoPlayerId+"_fluid_control_skip_back",t.leftContainer.appendChild(t.skipBack),t.skipForward=document.createElement("div"),t.skipForward.className="fluid_button fluid_button_skip_forward",t.skipForward.id=o.videoPlayerId+"_fluid_control_skip_forward",t.leftContainer.appendChild(t.skipForward)),t.progressContainer=document.createElement("div"),t.progressContainer.className="fluid_controls_progress_container fluid_slider",t.progressContainer.id=o.videoPlayerId+"_fluid_controls_progress_container",t.root.appendChild(t.progressContainer),t.progressWrapper=document.createElement("div"),t.progressWrapper.className="fluid_controls_progress",t.progressContainer.appendChild(t.progressWrapper),t.progressCurrent=document.createElement("div"),t.progressCurrent.className="fluid_controls_currentprogress",t.progressCurrent.id=o.videoPlayerId+"_vast_control_currentprogress",t.progressCurrent.style.backgroundColor=e.primaryColor,t.progressWrapper.appendChild(t.progressCurrent),t.progress_current_marker=document.createElement("div"),t.progress_current_marker.className="fluid_controls_currentpos",t.progress_current_marker.id=o.videoPlayerId+"_vast_control_currentpos",t.progressCurrent.appendChild(t.progress_current_marker),t.bufferedIndicator=document.createElement("div"),t.bufferedIndicator.className="fluid_controls_buffered",t.bufferedIndicator.id=o.videoPlayerId+"_buffered_amount",t.progressContainer.appendChild(t.bufferedIndicator),t.adMarkers=document.createElement("div"),t.adMarkers.className="fluid_controls_ad_markers_holder",t.adMarkers.id=o.videoPlayerId+"_ad_markers_holder",t.progressContainer.appendChild(t.adMarkers),t.rightContainer=document.createElement("div"),t.rightContainer.className="fluid_controls_right",t.root.appendChild(t.rightContainer),t.fullscreen=document.createElement("div"),t.fullscreen.id=o.videoPlayerId+"_fluid_control_fullscreen",t.fullscreen.className="fluid_button fluid_control_fullscreen fluid_button_fullscreen",t.rightContainer.appendChild(t.fullscreen),t.theatre=document.createElement("div"),t.theatre.id=o.videoPlayerId+"_fluid_control_theatre",t.theatre.className="fluid_button fluid_control_theatre fluid_button_theatre",t.rightContainer.appendChild(t.theatre),t.cardboard=document.createElement("div"),t.cardboard.id=o.videoPlayerId+"_fluid_control_cardboard",t.cardboard.className="fluid_button fluid_control_cardboard fluid_button_cardboard",t.rightContainer.appendChild(t.cardboard),t.subtitles=document.createElement("div"),t.subtitles.id=o.videoPlayerId+"_fluid_control_subtitles",t.subtitles.className="fluid_button fluid_button_subtitles",t.rightContainer.appendChild(t.subtitles),t.videoSource=document.createElement("div"),t.videoSource.id=o.videoPlayerId+"_fluid_control_video_source",t.videoSource.className="fluid_button fluid_button_video_source",t.rightContainer.appendChild(t.videoSource),t.playbackRate=document.createElement("div"),t.playbackRate.id=o.videoPlayerId+"_fluid_control_playback_rate",t.playbackRate.className="fluid_button fluid_button_playback_rate",t.rightContainer.appendChild(t.playbackRate),t.download=document.createElement("div"),t.download.id=o.videoPlayerId+"_fluid_control_download",t.download.className="fluid_button fluid_button_download",t.rightContainer.appendChild(t.download),t.volumeContainer=document.createElement("div"),t.volumeContainer.id=o.videoPlayerId+"_fluid_control_volume_container",t.volumeContainer.className="fluid_control_volume_container fluid_slider",t.rightContainer.appendChild(t.volumeContainer),t.volume=document.createElement("div"),t.volume.id=o.videoPlayerId+"_fluid_control_volume",t.volume.className="fluid_control_volume",t.volumeContainer.appendChild(t.volume),t.volumeCurrent=document.createElement("div"),t.volumeCurrent.id=o.videoPlayerId+"_fluid_control_currentvolume",t.volumeCurrent.className="fluid_control_currentvolume",t.volume.appendChild(t.volumeCurrent),t.volumeCurrentPos=document.createElement("div"),t.volumeCurrentPos.id=o.videoPlayerId+"_fluid_control_volume_currentpos",t.volumeCurrentPos.className="fluid_control_volume_currentpos",t.volumeCurrent.appendChild(t.volumeCurrentPos),t.mute=document.createElement("div"),t.mute.id=o.videoPlayerId+"_fluid_control_mute",t.mute.className="fluid_button fluid_button_volume fluid_control_mute",t.rightContainer.appendChild(t.mute),t.duration=document.createElement("div"),t.duration.id=o.videoPlayerId+"_fluid_control_duration",t.duration.className="fluid_control_duration fluid_fluid_control_duration",t.duration.innerText="00:00 / 00:00",t.rightContainer.appendChild(t.duration),t},o.controlPlayPauseToggle=function(){var e=o.domRef.player.parentNode.getElementsByClassName("fluid_control_playpause"),t=document.getElementById(o.videoPlayerId+"context_option_play"),n=o.domRef.player.parentNode.getElementsByClassName("fluid_controls_container"),i=document.getElementById(o.videoPlayerId+"_logo");if(document.getElementById(o.videoPlayerId+"_fluid_initial_play")&&(document.getElementById(o.videoPlayerId+"_fluid_initial_play").style.display="none",document.getElementById(o.videoPlayerId+"_fluid_initial_play_button").style.opacity="1"),!o.domRef.player.paused){for(var a=0;a<e.length;a++)e[a].className=e[a].className.replace(/\bfluid_button_play\b/g,"fluid_button_pause");for(var r=0;r<n.length;r++)n[r].classList.remove("initial_controls_show");return i&&i.classList.remove("initial_controls_show"),void(null!==t&&(t.innerHTML=o.displayOptions.captions.pause))}for(var l=0;l<e.length;l++)e[l].className=e[l].className.replace(/\bfluid_button_pause\b/g,"fluid_button_play");for(var d=0;d<n.length;d++)n[d].classList.add("initial_controls_show");o.isCurrentlyPlayingAd&&o.displayOptions.vastOptions.showPlayButton&&(document.getElementById(o.videoPlayerId+"_fluid_initial_play").style.display="block",document.getElementById(o.videoPlayerId+"_fluid_initial_play_button").style.opacity="1"),i&&i.classList.add("initial_controls_show"),null!==t&&(t.innerHTML=o.displayOptions.captions.play)},o.playPauseAnimationToggle=function(e){o.isCurrentlyPlayingAd||!o.displayOptions.layoutControls.playPauseAnimation||o.isSwitchingSource||(e?(document.getElementById(o.videoPlayerId+"_fluid_state_button").classList.remove("fluid_initial_pause_button"),document.getElementById(o.videoPlayerId+"_fluid_state_button").classList.add("fluid_initial_play_button")):(document.getElementById(o.videoPlayerId+"_fluid_state_button").classList.remove("fluid_initial_play_button"),document.getElementById(o.videoPlayerId+"_fluid_state_button").classList.add("fluid_initial_pause_button")),document.getElementById(o.videoPlayerId+"_fluid_initial_play").classList.add("transform-active"),setTimeout((function(){document.getElementById(o.videoPlayerId+"_fluid_initial_play").classList.remove("transform-active")}),800))},o.contolProgressbarUpdate=function(){for(var e=o.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress"),t=0;t<e.length;t++)e[t].style.width=o.domRef.player.currentTime/o.currentVideoDuration*100+"%"},o.controlDurationUpdate=function(){var e,t=o.formatTime(o.domRef.player.currentTime),n=!1;(o.hlsPlayer&&(n=o.hlsPlayer.levels&&o.hlsPlayer.levels[o.hlsPlayer.currentLevel]&&o.hlsPlayer.levels[o.hlsPlayer.currentLevel].details.live),isNaN(o.currentVideoDuration)||!isFinite(o.currentVideoDuration)||n)?e=t:e=t+" / "+o.formatTime(o.currentVideoDuration);for(var i=o.domRef.player.parentNode.getElementsByClassName("fluid_control_duration"),a=0;a<i.length;a++)i[a].innerHTML=e},o.contolVolumebarUpdate=function(){var e=document.getElementById(o.videoPlayerId+"_fluid_control_currentvolume"),t=document.getElementById(o.videoPlayerId+"_fluid_control_volume_currentpos"),n=document.getElementById(o.videoPlayerId+"_fluid_control_volume").clientWidth,i=t.clientWidth,a=o.domRef.player.parentNode.getElementsByClassName("fluid_control_mute"),r=document.getElementById(o.videoPlayerId+"context_option_mute");if(0!==o.domRef.player.volume?(o.latestVolume=o.domRef.player.volume,o.fluidStorage.fluidMute=!1):o.fluidStorage.fluidMute=!0,o.domRef.player.volume&&!o.domRef.player.muted){for(var l=0;l<a.length;l++)a[l].className=a[l].className.replace(/\bfluid_button_mute\b/g,"fluid_button_volume");null!==r&&(r.innerHTML=o.displayOptions.captions.mute)}else{for(var d=0;d<a.length;d++)a[d].className=a[d].className.replace(/\bfluid_button_volume\b/g,"fluid_button_mute");null!==r&&(r.innerHTML=o.displayOptions.captions.unmute)}e.style.width=o.domRef.player.volume*n+"px",t.style.left=o.domRef.player.volume*n-i/2+"px"},o.muteToggle=function(){0===o.domRef.player.volume||o.domRef.player.muted?(o.domRef.player.volume=o.latestVolume,o.domRef.player.muted=!1):(o.domRef.player.volume=0,o.domRef.player.muted=!0),o.fluidStorage.fluidVolume=o.latestVolume,o.fluidStorage.fluidMute=o.domRef.player.muted},o.checkFullscreenSupport=function(e){var t=document.getElementById(e);return t.mozRequestFullScreen?{goFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",isFullscreen:"mozFullScreenElement"}:t.webkitRequestFullscreen?{goFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",isFullscreen:"webkitFullscreenElement"}:t.msRequestFullscreen?{goFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",isFullscreen:"msFullscreenElement"}:t.requestFullscreen?{goFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",isFullscreen:"fullscreenElement"}:!!o.domRef.player.webkitSupportsFullscreen&&{goFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",isFullscreen:"webkitDisplayingFullscreen"}},o.fullscreenOff=function(e,t){for(var n=0;n<e.length;n++)e[n].className=e[n].className.replace(/\bfluid_button_fullscreen_exit\b/g,"fluid_button_fullscreen");null!==t&&(t.innerHTML="Fullscreen"),o.fullscreenMode=!1},o.fullscreenOn=function(e,t){for(var n=0;n<e.length;n++)e[n].className=e[n].className.replace(/\bfluid_button_fullscreen\b/g,"fluid_button_fullscreen_exit");null!==t&&(t.innerHTML=o.displayOptions.captions.exitFullscreen),o.fullscreenMode=!0},o.fullscreenToggle=function(){var e,t=o.domRef.player,n=document.getElementById("fluid_video_wrapper_"+o.videoPlayerId),i=o.checkFullscreenSupport("fluid_video_wrapper_"+o.videoPlayerId),a=t.parentNode.getElementsByClassName("fluid_control_fullscreen"),r=document.getElementById(o.videoPlayerId+"context_option_fullscreen");o.theatreMode&&o.theatreToggle(),i?"webkitEnterFullscreen"===i.goFullscreen?t[i.isFullscreen]||(e="videoPlayerTag."+i.goFullscreen+"();",o.fullscreenOn(a,r),new Function("videoPlayerTag",e)(t)):(null===document[i.isFullscreen]?(e="videoPlayerTag."+i.goFullscreen+"();",o.fullscreenOn(a,r)):(e="document."+i.exitFullscreen+"();",o.fullscreenOff(a,r)),new Function("videoPlayerTag",e)(n)):-1!==n.className.search(/\bpseudo_fullscreen\b/g)?(n.className=n.className.replace(/\bpseudo_fullscreen\b/g,""),o.fullscreenOff(a,r)):(n.className+=" pseudo_fullscreen",o.fullscreenOn(a,r)),o.resizeVpaidAuto()},o.findClosestParent=function(e,t){var n,o=null;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"==typeof document.body[e]&&(o=e,!0)})),e[o](t))return e;for(;e;){if((n=e.parentElement)&&n[o](t))return n;e=n}return null},o.getTranslateX=function(e){var t=null;try{var n=e.style.transform.match(/translate3d\((-?\d+px,\s?){2}-?\d+px\)/);n&&n.length&&(t=n[0].replace("translate3d(","").replace(")","").replace(/\s/g,"").replace(/px/g,"").split(","))}catch(e){t=null}return t&&3===t.length?parseInt(t[0]):0},o.getEventOffsetX=function(e,t){for(var n=0,i=0;t&&!isNaN(t.offsetLeft);)i=o.getTranslateX(t),"BODY"===t.tagName?n+=t.offsetLeft+t.clientLeft+i-(t.scrollLeft||document.documentElement.scrollLeft):n+=t.offsetLeft+t.clientLeft+i-t.scrollLeft,t=t.offsetParent;return(void 0!==e.touches&&void 0!==e.touches[0]?e.touches[0].clientX:e.clientX)-n},o.getEventOffsetY=function(e,t){var n=1,i=o.findClosestParent(t,'div[id^="fluid_video_wrapper_"]');if(i){var a=i.id.replace("fluid_video_wrapper_",""),r=o.checkFullscreenSupport("fluid_video_wrapper_"+a);r&&document[r.isFullscreen]&&(n=0)}for(var l=0;t&&!isNaN(t.offsetTop);)"BODY"===t.tagName?l+=t.offsetTop-(t.scrollTop||document.documentElement.scrollTop)*n:l+=t.offsetTop-t.scrollTop*n,t=t.offsetParent;return e.clientY-l},o.onProgressbarMouseDown=function(e){var t;if(o.displayOptions.layoutControls.playPauseAnimation=!1,t=o.displayOptions.layoutControls.showCardBoardView?o.getEventOffsetX(e,e.target.parentNode):o.getEventOffsetX(e,document.getElementById(o.videoPlayerId+"_fluid_controls_progress_container")),!o.isCurrentlyPlayingAd){o.fluidPseudoPause=!0;var n=o.domRef.player.paused;n||o.domRef.player.pause();var i=function(e){var t=document.getElementById(o.videoPlayerId+"_fluid_controls_progress_container").clientWidth;t&&(o.domRef.player.currentTime=o.currentVideoDuration*e/t)},a=function(e){var n=o.getEventOffsetX(e,e.target.parentNode);t=NaN,i(n),o.contolProgressbarUpdate(o.videoPlayerId),o.controlDurationUpdate(o.videoPlayerId)},r=function e(r){document.removeEventListener("mousemove",a),document.removeEventListener("touchmove",a),document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e);var l=o.getEventOffsetX(r,r.target.parentNode);isNaN(l)&&!isNaN(t)&&(l=t),isNaN(l)||i(l),n||o.play(),o.initialAnimationSet&&setTimeout((function(){o.displayOptions.layoutControls.playPauseAnimation=o.initialAnimationSet}),200),o.fluidPseudoPause=!1};document.addEventListener("mouseup",r),document.addEventListener("touchend",r),document.addEventListener("mousemove",a),document.addEventListener("touchmove",a)}},o.onVolumeBarMouseDown=function(){var e=function(e){var t=o.domRef.controls.volumeContainer.clientWidth;if(t){var n=e/t;n<.05?(n=0,o.domRef.player.muted=!0):n>.95&&(n=1),o.domRef.player.muted&&n>0&&(o.domRef.player.muted=!1),o.setVolume(n)}},t=function(t){var n=o.getEventOffsetX(t,o.domRef.controls.volumeContainer);e(n)},n=function n(i){document.removeEventListener("mousemove",t),document.removeEventListener("touchmove",t),document.removeEventListener("mouseup",n),document.removeEventListener("touchend",n);var a=o.getEventOffsetX(i,o.domRef.controls.volumeContainer);isNaN(a)||e(a)};document.addEventListener("mouseup",n),document.addEventListener("touchend",n),document.addEventListener("mousemove",t),document.addEventListener("touchmove",t)},o.findRoll=function(e){var t=[];if(t.length=0,e&&o.hasOwnProperty("adList")){for(var n in o.adList)o.adList.hasOwnProperty(n)&&o.adList[n].roll===e&&t.push(n);return t}},o.onKeyboardVolumeChange=function(e){var t=o.domRef.player.volume;"asc"===e?t+=.05:"desc"===e&&(t-=.05),t<.05?t=0:t>.95&&(t=1),o.setVolume(t)},o.onKeyboardSeekPosition=function(e){o.isCurrentlyPlayingAd||(o.domRef.player.currentTime=o.getNewCurrentTimeValueByKeyCode(e,o.domRef.player.currentTime,o.domRef.player.duration))},o.getNewCurrentTimeValueByKeyCode=function(e,t,n){var o=t;switch(e){case 37:o=(o-=5)<5?0:o;break;case 39:o=(o+=5)>n-5?n:o;break;case 35:o=n;break;case 36:o=0;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:if(e<58&&e>47)o=n*(10*(e-48))/100}return o},o.handleMouseleave=function(e){void 0!==e.clientX&&o.domRef.wrapper.contains(document.elementFromPoint(e.clientX,e.clientY))||(o.hideControlBar(),o.hideTitle())},o.handleMouseenterForKeyboard=function(){o.captureKey||(o.captureKey=function(e){e.stopPropagation();var t=e.keyCode;switch(t){case 70:o.fullscreenToggle(),e.preventDefault();break;case 13:case 32:o.playPauseToggle(),e.preventDefault();break;case 77:o.muteToggle(),e.preventDefault();break;case 38:o.onKeyboardVolumeChange("asc"),e.preventDefault();break;case 40:o.onKeyboardVolumeChange("desc"),e.preventDefault();break;case 37:case 39:case 35:case 36:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:o.onKeyboardSeekPosition(t),e.preventDefault()}return!1},document.addEventListener("keydown",o.captureKey,!0))},o.keyboardControl=function(){o.domRef.wrapper.addEventListener("click",o.handleMouseenterForKeyboard,!1);var e=o.handleWindowClick.bind(o);o.destructors.push((function(){window.removeEventListener("click",e)})),window.addEventListener("click",e)},o.handleWindowClick=function(e){o.domRef.wrapper?o.domRef.wrapper.contains(e.target)||e.target.id==="skipHref_"+o.videoPlayerId||(document.removeEventListener("keydown",o.captureKey,!0),delete o.captureKey,o.theatreMode&&!o.theatreModeAdvanced&&o.theatreToggle()):console.warn("Dangling click event listener should be collected for unknown wrapper "+o.videoPlayerId+". Did you forget to call destroy on player instance?")},o.initialPlay=function(){if(o.domRef.player.addEventListener("playing",(function(){o.toggleLoader(!1)})),o.domRef.player.addEventListener("timeupdate",(function(){o.toggleLoader(!1)})),o.domRef.player.addEventListener("waiting",(function(){o.toggleLoader(!0)})),!o.displayOptions.layoutControls.playButtonShowing){document.getElementById(o.videoPlayerId+"_fluid_controls_container").classList.remove("initial_controls_show");var e=document.getElementById(o.videoPlayerId+"_logo");e&&e.classList.remove("initial_controls_show")}o.firstPlayLaunched||(o.playPauseToggle(),o.domRef.player.removeEventListener("play",o.initialPlay))},o.playPauseToggle=function(){var e=!o.firstPlayLaunched,t=o.findRoll("preRoll");if(e&&0!==t.length){o.isCurrentlyPlayingAd=!0;var n=o.getBrowserVersion(),i=!1!==o.mobileInfo.userOs&&"Android"===o.mobileInfo.userOs&&"Google Chrome"===n.browserName;("Safari"===n.browserName||i)&&(o.domRef.player.src="https://cdn.fluidplayer.com/static/blank.mp4",o.domRef.player.play(),o.playPauseAnimationToggle(!0)),o.firstPlayLaunched=!0,o.prepareVast("preRoll"),o.preRollAdPodsLength=t.length}else e&&0===t.length&&(o.firstPlayLaunched=!0,o.displayOptions.vastOptions.vastAdvanced.noVastVideoCallback()),o.domRef.player.paused?(o.isCurrentlyPlayingAd&&null!==o.vastOptions&&o.vastOptions.vpaid?o.resumeVpaidAd():o.dashPlayer?o.dashPlayer.play():o.domRef.player.play(),o.playPauseAnimationToggle(!0)):e||(o.isCurrentlyPlayingAd&&null!==o.vastOptions&&o.vastOptions.vpaid?o.pauseVpaidAd():o.domRef.player.pause(),o.playPauseAnimationToggle(!1)),o.toggleOnPauseAd();var a=function(){o.prepareVast("onPauseRoll"),o.prepareVast("postRoll"),o.prepareVast("midRoll")};if(e){var r=document.getElementById(o.videoPlayerId+"_fluid_pseudo_poster");r&&r.parentNode.removeChild(r),o.mainVideoDuration>0?a():o.domRef.player.addEventListener("mainVideoDurationSet",a)}o.adTimer();var l=document.getElementById(o.videoPlayerId+"_fluid_html_on_pause");l&&!o.isCurrentlyPlayingAd&&(o.domRef.player.paused?l.style.display="flex":l.style.display="none")},o.setCustomControls=function(){o.trackEvent(o.domRef.player.parentNode,"click",".fluid_control_playpause",(function(){o.firstPlayLaunched||o.domRef.player.removeEventListener("play",o.initialPlay),o.playPauseToggle()}),!1),o.domRef.player.addEventListener("play",(function(){o.controlPlayPauseToggle(),o.contolVolumebarUpdate()}),!1),o.domRef.player.addEventListener("fluidplayerpause",(function(){o.controlPlayPauseToggle()}),!1),o.domRef.player.addEventListener("timeupdate",(function(){o.contolProgressbarUpdate(),o.controlDurationUpdate()}));var e=o.getMobileOs().userOs?"touchstart":"mousedown";o.displayOptions.layoutControls.showCardBoardView?o.trackEvent(o.domRef.player.parentNode,e,".fluid_controls_progress_container",(function(e){return o.onProgressbarMouseDown(e)}),!1):document.getElementById(o.videoPlayerId+"_fluid_controls_progress_container").addEventListener(e,(function(e){return o.onProgressbarMouseDown(e)}),!1),document.getElementById(o.videoPlayerId+"_fluid_control_volume_container").addEventListener(e,(function(e){return o.onVolumeBarMouseDown()}),!1),o.domRef.player.addEventListener("volumechange",(function(){return o.contolVolumebarUpdate()})),o.trackEvent(o.domRef.player.parentNode,"click",".fluid_control_mute",(function(){return o.muteToggle()})),o.setBuffering(),o.trackEvent(o.domRef.player.parentNode,"click",".fluid_control_fullscreen",(function(){return o.fullscreenToggle()})),o.displayOptions.layoutControls.allowTheatre&&!o.isInIframe?(document.getElementById(o.videoPlayerId+"_fluid_control_theatre").style.display="inline-block",o.trackEvent(o.domRef.player.parentNode,"click",".fluid_control_theatre",(function(){return o.theatreToggle()}))):document.getElementById(o.videoPlayerId+"_fluid_control_theatre").style.display="none",o.domRef.player.addEventListener("ratechange",(function(){o.isCurrentlyPlayingAd&&(o.playbackRate=1)}))},o.createTimePositionPreview=function(){if(o.showTimeOnHover){var e=document.getElementById(o.videoPlayerId+"_fluid_controls_progress_container"),t=document.createElement("div");t.id=o.videoPlayerId+"_fluid_timeline_preview",t.className="fluid_timeline_preview",t.style.display="none",t.style.position="absolute",e.appendChild(t),document.getElementById(o.videoPlayerId+"_fluid_controls_progress_container").addEventListener("mousemove",(function(e){var t=document.getElementById(o.videoPlayerId+"_fluid_controls_progress_container"),n=t.clientWidth,i=document.getElementById(o.videoPlayerId+"_fluid_timeline_preview"),a=o.getEventOffsetX(e,t),r=o.currentVideoDuration*a/n;i.innerText=o.formatTime(r),i.style.display="block",i.style.left=r/o.domRef.player.duration*100+"%"}),!1),document.getElementById(o.videoPlayerId+"_fluid_controls_progress_container").addEventListener("mouseout",(function(){document.getElementById(o.videoPlayerId+"_fluid_timeline_preview").style.display="none"}),!1)}},o.setCustomContextMenu=function(){var e=o.domRef.wrapper,t=o.displayOptions.layoutControls.contextMenu.controls,i=o.displayOptions.layoutControls.contextMenu.links,a=document.createElement("div");a.id=o.videoPlayerId+"_fluid_context_menu",a.className="fluid_context_menu",a.style.display="none",a.style.position="absolute";var r=document.createElement("ul");if(a.appendChild(r),i){var l,d=n(i);try{var s=function(){var e=l.value,t=document.createElement("li");t.id=o.videoPlayerId+"context_option_play",t.innerHTML=e.label,t.addEventListener("click",(function(){return window.open(e.href,"_blank")}),!1),r.appendChild(t)};for(d.s();!(l=d.n()).done;)s()}catch(e){d.e(e)}finally{d.f()}}if(t){var u=document.createElement("li");u.id=o.videoPlayerId+"context_option_play",u.innerHTML=o.displayOptions.captions.play,u.addEventListener("click",(function(){return o.playPauseToggle()}),!1),r.appendChild(u);var c=document.createElement("li");c.id=o.videoPlayerId+"context_option_mute",c.innerHTML=o.displayOptions.captions.mute,c.addEventListener("click",(function(){return o.muteToggle()}),!1),r.appendChild(c);var p=document.createElement("li");p.id=o.videoPlayerId+"context_option_fullscreen",p.innerHTML=o.displayOptions.captions.fullscreen,p.addEventListener("click",(function(){return o.fullscreenToggle()}),!1),r.appendChild(p)}o.domRef.player.parentNode.insertBefore(a,o.domRef.player.nextSibling),e.addEventListener("contextmenu",(function(e){e.preventDefault(),a.style.left=o.getEventOffsetX(e,o.domRef.player)+"px",a.style.top=o.getEventOffsetY(e,o.domRef.player)+"px",a.style.display="block"}),!1),document.addEventListener("click",(function(e){e.target===o.domRef.player&&2===e.button||(a.style.display="none")}),!1)},o.setDefaultLayout=function(){o.domRef.wrapper.className+=" fluid_player_layout_"+o.displayOptions.layoutControls.layout,o.setCustomContextMenu();var e=o.generateCustomControlTags({displayVolumeBar:o.checkShouldDisplayVolumeBar(),primaryColor:o.displayOptions.layoutControls.primaryColor?o.displayOptions.layoutControls.primaryColor:"red",controlForwardBackward:!!o.displayOptions.layoutControls.controlForwardBackward.show});o.domRef.player.removeAttribute("controls"),o.domRef.player.parentNode.insertBefore(e.root,o.domRef.player.nextSibling),o.domRef.player.parentNode.insertBefore(e.loader,o.domRef.player.nextSibling),o.domRef.controls=e;var t=100,n=setInterval((function(){t?o.checkIfVolumebarIsRendered()?(clearInterval(n),o.contolVolumebarUpdate(o.videoPlayerId)):t--:clearInterval(n)}),100);o.displayOptions.layoutControls.doubleclickFullscreen&&o.domRef.player.addEventListener("dblclick",o.fullscreenToggle),o.initHtmlOnPauseBlock(),o.setCustomControls(),o.setupThumbnailPreview(),o.createTimePositionPreview(),o.posterImage(),o.initPlayButton(),o.setVideoPreload(),o.createPlaybackList(),o.createDownload(),o.displayOptions.layoutControls.controlForwardBackward.show&&o.initSkipControls()},o.initSkipControls=function(){var e=function(e){if(!o.isCurrentlyPlayingAd){var t=o.domRef.player.currentTime+e;t<0&&(t=0),o.domRef.player.currentTime=t}};o.domRef.controls.skipBack.addEventListener("click",e.bind(t,-10)),o.domRef.controls.skipForward.addEventListener("click",e.bind(t,10))},o.checkIfVolumebarIsRendered=function(){var e=document.getElementById(o.videoPlayerId+"_fluid_control_volume_currentpos"),t=document.getElementById(o.videoPlayerId+"_fluid_control_volume").clientWidth;return e.clientWidth!==t},o.setLayout=function(){var e=o.isTouchDevice()?"touchend":"click";o.domRef.player.addEventListener(e,(function(){return o.playPauseToggle()}),!1),o.domRef.player.addEventListener("play",o.initialPlay,!1),o.setDefaultLayout()},o.handleFullscreen=function(){void 0===document.vastFullsreenChangeEventListenersAdded&&(["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach((function(t){"object"===e(document["on"+t])&&document.addEventListener(t,(function(e){o.recalculateAdDimensions()}),!1)})),document.vastFullsreenChangeEventListenersAdded=!0)},o.setupPlayerWrapper=function(){var e=document.createElement("div");return e.id="fluid_video_wrapper_"+o.videoPlayerId,e.className=o.isTouchDevice()?"fluid_video_wrapper mobile":"fluid_video_wrapper",o.displayOptions.layoutControls.fillToContainer?(e.style.width="100%",e.style.height="100%"):(e.style.height=o.domRef.player.clientHeight+"px",e.style.width=o.domRef.player.clientWidth+"px"),o.domRef.player.style.height="100%",o.domRef.player.style.width="100%",o.domRef.player.parentNode.insertBefore(e,o.domRef.player),e.appendChild(o.domRef.player),e},o.onErrorDetection=function(){o.domRef.player.networkState===o.domRef.player.NETWORK_NO_SOURCE&&o.isCurrentlyPlayingAd&&o.playMainVideoWhenVastFails(401)},o.createVideoSourceSwitch=function(){var e=[],t=o.domRef.player.querySelectorAll("source");if([].forEach.call(t,(function(t){t.title&&t.src&&e.push({title:t.title,url:t.src,isHD:null!=t.getAttribute("data-fluid-hd")})})),o.videoSources=e,!(o.videoSources.length<=1)){var i=document.getElementById(o.videoPlayerId+"_fluid_control_video_source");i.style.display="inline-block";var a=!1,r=document.createElement("div");r.id=o.videoPlayerId+"_fluid_control_video_source_list",r.className="fluid_video_sources_list",r.style.display="none";var l,d=!0,s=n(o.videoSources);try{for(s.s();!(l=s.n()).done;){var u=l.value,c=u.url.split(".").pop();if("iOS"!==o.mobileInfo.userOs||"mkv"!==c){var p=d?"source_selected":"",m=u.isHD?'<sup style="color:'+o.displayOptions.layoutControls.primaryColor+'" class="fp_hd_source"></sup>':"";d=!1;var f=document.createElement("div");f.id="source_"+o.videoPlayerId+"_"+u.title,f.className="fluid_video_source_list_item",f.innerHTML='<span class="source_button_icon '+p+'"></span>'+u.title+m,f.addEventListener("click",(function(e){e.stopPropagation(),o.domRef.player.style.width=o.domRef.player.clientWidth+"px",o.domRef.player.style.height=o.domRef.player.clientHeight+"px";for(var t=this,n=document.getElementsByClassName("source_button_icon"),i=0;i<n.length;i++)n[i].className=n[i].className.replace("source_selected","");t.firstChild.className+=" source_selected",o.videoSources.forEach((function(e){e.title===t.innerText.replace(/(\r\n\t|\n|\r\t)/gm,"")&&(o.setBuffering(),o.setVideoSource(e.url),o.fluidStorage.fluidQuality=e.title)})),o.openCloseVideoSourceSwitch()})),r.appendChild(f),a=!0}}}catch(e){s.e(e)}finally{s.f()}a?(i.appendChild(r),i.addEventListener("click",(function(){o.openCloseVideoSourceSwitch()}))):document.getElementById(o.videoPlayerId+"_fluid_control_video_source").style.display="none"}},o.openCloseVideoSourceSwitch=function(){var e=document.getElementById(o.videoPlayerId+"_fluid_control_video_source_list");if(o.isCurrentlyPlayingAd)e.style.display="none";else if("none"===e.style.display){e.style.display="block";e.addEventListener("mouseleave",(function t(){e.removeEventListener("mouseleave",t),e.style.display="none"}))}else e.style.display="none"},o.setVideoSource=function(e){if("iOS"===o.mobileInfo.userOs&&e.indexOf(".mkv")>0)return console.log("[FP_ERROR] .mkv files not supported by iOS devices."),!1;if(o.isCurrentlyPlayingAd)o.originalSrc=e;else{o.isSwitchingSource=!0;var t=!1;o.domRef.player.paused||(o.domRef.player.pause(),t=!0);var n=o.domRef.player.currentTime;o.setCurrentTimeAndPlay(n,t),o.domRef.player.src=e,o.originalSrc=e,o.displayOptions.layoutControls.mediaType=o.getCurrentSrcType(),o.initialiseStreamers()}},o.setCurrentTimeAndPlay=function(e,t){var n=function t(){o.currentTime=e,o.domRef.player.removeEventListener("playing",t)};o.domRef.player.addEventListener("loadedmetadata",(function i(){o.domRef.player.currentTime=e,o.domRef.player.removeEventListener("loadedmetadata",i),"iOS"!==o.mobileInfo.userOs&&"safari"!==o.getBrowserVersion().browserName.toLowerCase()||o.domRef.player.addEventListener("playing",n),t?o.domRef.player.play():(o.domRef.player.pause(),o.controlPlayPauseToggle(o.videoPlayerId)),o.isSwitchingSource=!1,o.domRef.player.style.width="100%",o.domRef.player.style.height="100%"}),!1),o.domRef.player.load()},o.initTitle=function(){if(o.displayOptions.layoutControls.title){var e=document.createElement("div");e.id=o.videoPlayerId+"_title",o.domRef.player.parentNode.insertBefore(e,null),e.innerHTML+=o.displayOptions.layoutControls.title,e.classList.add("fp_title")}},o.hasTitle=function(){var e=document.getElementById(o.videoPlayerId+"_title"),t=o.displayOptions.layoutControls.title;return e&&null!=t},o.hideTitle=function(){var e=document.getElementById(o.videoPlayerId+"_title");o.hasTitle()&&e.classList.add("fade_out")},o.showTitle=function(){var e=document.getElementById(o.videoPlayerId+"_title");o.hasTitle()&&e.classList.remove("fade_out")},o.initLogo=function(){if(o.displayOptions.layoutControls.logo.imageUrl){var e=document.createElement("div");e.id=o.videoPlayerId+"_logo";var t="logo_maintain_display";o.displayOptions.layoutControls.logo.hideWithControls&&(t="initial_controls_show"),e.classList.add(t,"fp_logo");var n=document.createElement("img");n.id=o.videoPlayerId+"_logo_image",o.displayOptions.layoutControls.logo.imageUrl&&(n.src=o.displayOptions.layoutControls.logo.imageUrl),n.style.position="absolute",n.style.margin=o.displayOptions.layoutControls.logo.imageMargin;var i=o.displayOptions.layoutControls.logo.position.toLowerCase();-1!==i.indexOf("bottom")?n.style.bottom=0:n.style.top=0,-1!==i.indexOf("right")?n.style.right=0:n.style.left=0,o.displayOptions.layoutControls.logo.opacity&&(n.style.opacity=o.displayOptions.layoutControls.logo.opacity),null!==o.displayOptions.layoutControls.logo.clickUrl&&(n.style.cursor="pointer",n.addEventListener("click",(function(){window.open(o.displayOptions.layoutControls.logo.clickUrl,"_blank").focus()}))),o.displayOptions.layoutControls.logo.mouseOverImageUrl&&(n.addEventListener("mouseover",(function(){n.src=o.displayOptions.layoutControls.logo.mouseOverImageUrl}),!1),n.addEventListener("mouseout",(function(){n.src=o.displayOptions.layoutControls.logo.imageUrl}),!1)),o.domRef.player.parentNode.insertBefore(e,null),e.appendChild(n,null)}},o.initHtmlOnPauseBlock=function(){if(!o.hasValidOnPauseAd()&&o.displayOptions.layoutControls.htmlOnPauseBlock.html){var e=document.createElement("div");e.id=o.videoPlayerId+"_fluid_html_on_pause",e.className="fluid_html_on_pause",e.style.display="none",e.innerHTML=o.displayOptions.layoutControls.htmlOnPauseBlock.html,e.onclick=function(e){o.playPauseToggle()},o.displayOptions.layoutControls.htmlOnPauseBlock.width&&(e.style.width=o.displayOptions.layoutControls.htmlOnPauseBlock.width+"px"),o.displayOptions.layoutControls.htmlOnPauseBlock.height&&(e.style.height=o.displayOptions.layoutControls.htmlOnPauseBlock.height+"px"),o.domRef.player.parentNode.insertBefore(e,null)}},o.initPlayButton=function(){var e=document.createElement("div");e.id=o.videoPlayerId+"_fluid_initial_play_button",e.className="fluid_html_on_pause";var t=o.displayOptions.layoutControls.primaryColor?o.displayOptions.layoutControls.primaryColor:"#333333";e.innerHTML='<div id="'+o.videoPlayerId+'_fluid_initial_play" class="fluid_initial_play" style="background-color:'+t+'"><div id="'+o.videoPlayerId+'_fluid_state_button" class="fluid_initial_play_button"></div></div>';(e.addEventListener("click",(function t(){o.playPauseToggle(),e.removeEventListener("click",t)})),o.displayOptions.layoutControls.playButtonShowing)||(document.getElementById(o.videoPlayerId+"_fluid_controls_container").classList.add("initial_controls_show"),e.style.opacity="0");o.domRef.player.parentNode.insertBefore(e,null)},o.mainVideoReady=function(){if(0===o.mainVideoDuration&&!o.isCurrentlyPlayingAd&&!1===o.mainVideoReadyState){var e=new CustomEvent("mainVideoDurationSet");o.mainVideoDuration=o.domRef.player.duration,o.mainVideoReadyState=!0,o.domRef.player.dispatchEvent(e),o.domRef.player.removeEventListener("loadedmetadata",o.mainVideoReady)}},o.userActivityChecker=function(){var e=o.domRef.wrapper;o.newActivity=null;var t=!1,n=function(e){"touchstart"!==e.type&&"mousedown"!==e.type||(t=!0),"touchend"!==e.type&&"mouseup"!==e.type||(t=!1),o.newActivity=!0};setInterval((function(){if(!0===o.newActivity){if(t||o.isLoading||(o.newActivity=!1),!1===o.isUserActive||!o.isControlBarVisible()){var e=new CustomEvent("userActive");o.domRef.player.dispatchEvent(e),o.isUserActive=!0}clearTimeout(o.inactivityTimeout),o.inactivityTimeout=setTimeout((function(){if(!0!==o.newActivity){o.isUserActive=!1;var e=new CustomEvent("userInactive");o.domRef.player.dispatchEvent(e)}else clearTimeout(o.inactivityTimeout)}),1e3*o.displayOptions.layoutControls.controlBar.autoHideTimeout)}}),300);for(var i=o.isTouchDevice()?["touchstart","touchmove","touchend"]:["mousemove","mousedown","mouseup"],a=0;a<i.length;a++)e.addEventListener(i[a],n)},o.hasControlBar=function(){return!!document.getElementById(o.videoPlayerId+"_fluid_controls_container")},o.isControlBarVisible=function(){if(!1===o.hasControlBar())return!1;var e=document.getElementById(o.videoPlayerId+"_fluid_controls_container"),t=window.getComputedStyle(e,null);return!(0===t.opacity||"hidden"===t.visibility)},o.setVideoPreload=function(){o.domRef.player.setAttribute("preload",o.displayOptions.layoutControls.preload)},o.hideControlBar=function(){if(o.isCurrentlyPlayingAd&&!o.domRef.player.paused&&o.toggleAdCountdown(!0),o.domRef.player.style.cursor="none",o.hasControlBar()){for(var e=o.domRef.player.parentNode.getElementsByClassName("fluid_controls_container"),t=o.domRef.player.parentNode.getElementsByClassName("fp_logo"),n=0;n<e.length;n++)o.displayOptions.layoutControls.controlBar.animated?(e[n].classList.remove("fade_in"),e[n].classList.add("fade_out")):e[n].style.display="none";for(var i=0;i<t.length;i++)o.displayOptions.layoutControls.controlBar.animated?t[i]&&(t[i].classList.remove("fade_in"),t[i].classList.add("fade_out")):t[i]&&(t[i].style.display="none")}},o.showControlBar=function(){if(o.isCurrentlyPlayingAd&&!o.domRef.player.paused&&o.toggleAdCountdown(!1),o.isTouchDevice()||(o.domRef.player.style.cursor="default"),o.hasControlBar()){for(var e=o.domRef.player.parentNode.getElementsByClassName("fluid_controls_container"),t=o.domRef.player.parentNode.getElementsByClassName("fp_logo"),n=0;n<e.length;n++)o.displayOptions.layoutControls.controlBar.animated?(e[n].classList.remove("fade_out"),e[n].classList.add("fade_in")):e[n].style.display="block";for(var i=0;i<t.length;i++)o.displayOptions.layoutControls.controlBar.animated?t[i]&&(t[i].classList.remove("fade_out"),t[i].classList.add("fade_in")):t[i]&&(t[i].style.display="block")}},o.linkControlBarUserActivity=function(){o.domRef.player.addEventListener("userInactive",o.hideControlBar),o.domRef.player.addEventListener("userInactive",o.hideTitle),o.domRef.player.addEventListener("userActive",o.showControlBar),o.domRef.player.addEventListener("userActive",o.showTitle)},o.initMute=function(){!0===o.displayOptions.layoutControls.mute&&(o.domRef.player.volume=0)},o.initLoop=function(){o.domRef.player.loop=!!o.displayOptions.layoutControls.loop},o.setBuffering=function(){for(var e,t=o.domRef.player.parentNode.getElementsByClassName("fluid_controls_buffered"),n=0;n<t.length;n++)t[n].style.width=0;e=setInterval((function(){var n=o.domRef.player.duration;if(!(n<=0))for(var i=0;i<o.domRef.player.buffered.length;i++)if(!(o.domRef.player.buffered.start(o.domRef.player.buffered.length-1-i)>=o.domRef.player.currentTime)){for(var a=o.domRef.player.buffered.end(o.domRef.player.buffered.length-1-i)/n*100+"%",r=0;r<t.length;r++)t[r].style.width=a;e&&1==o.domRef.player.buffered.end(o.domRef.player.buffered.length-1-i)/n&&clearInterval(e);break}}),500)},o.createPlaybackList=function(){if(o.displayOptions.layoutControls.playbackRateEnabled){document.getElementById(o.videoPlayerId+"_fluid_control_playback_rate").style.display="inline-block";var e=document.getElementById(o.videoPlayerId+"_fluid_control_playback_rate"),t=document.createElement("div");t.id=o.videoPlayerId+"_fluid_control_video_playback_rate",t.className="fluid_video_playback_rates",t.style.display="none",["x2","x1.5","x1","x0.5"].forEach((function(e){var n=document.createElement("div");n.className="fluid_video_playback_rates_item",n.innerText=e,n.addEventListener("click",(function(e){e.stopPropagation();var t=this.innerText.replace("x","");o.setPlaybackSpeed(t),o.openCloseVideoPlaybackRate()})),t.appendChild(n)})),e.appendChild(t),e.addEventListener("click",(function(){o.openCloseVideoPlaybackRate()}))}},o.openCloseVideoPlaybackRate=function(){var e=document.getElementById(o.videoPlayerId+"_fluid_control_video_playback_rate");if(o.isCurrentlyPlayingAd||"none"!==e.style.display)e.style.display="none";else{e.style.display="block";e.addEventListener("mouseleave",(function t(){e.removeEventListener("mouseleave",t),e.style.display="none"}))}},o.createDownload=function(){var e=document.getElementById(o.videoPlayerId+"_fluid_control_download");if(o.displayOptions.layoutControls.allowDownload){e.style.display="inline-block";var t=document.createElement("a");t.id=o.videoPlayerId+"_download",t.onclick=function(e){var t=this;void 0!==e.stopImmediatePropagation&&e.stopImmediatePropagation(),setInterval((function(){t.download="",t.href=""}),100)},e.appendChild(t),e.addEventListener("click",(function(){var e=document.getElementById(o.videoPlayerId+"_download");e.download=o.originalSrc,e.href=o.originalSrc,t.click()}))}},o.theatreToggle=function(){if(!o.isInIframe){if(o.fullscreenMode&&o.fullscreenToggle(),o.displayOptions.layoutControls.theatreAdvanced){var e=document.getElementById(o.displayOptions.layoutControls.theatreAdvanced.theatreElement),t=o.displayOptions.layoutControls.theatreAdvanced.classToApply;null!=e&&null!=t?(o.theatreMode?e.classList.remove(t):e.classList.add(t),o.theatreModeAdvanced=!o.theatreModeAdvanced):(console.log("[FP_ERROR] Theatre mode elements could not be found, defaulting behaviour."),o.defaultTheatre())}else o.defaultTheatre();o.theatreMode=!o.theatreMode,o.fluidStorage.fluidTheatre=o.theatreMode;var n=o.theatreMode?"theatreModeOn":"theatreModeOff",i=document.createEvent("CustomEvent");i.initEvent(n,!1,!0),o.domRef.player.dispatchEvent(i),o.resizeVpaidAuto()}},o.defaultTheatre=function(){var e=document.getElementById("fluid_video_wrapper_"+o.videoPlayerId);if(o.theatreMode)return e.classList.remove("fluid_theatre_mode"),e.style.maxHeight="",e.style.marginTop="",e.style.left="",e.style.right="",e.style.position="",void(o.displayOptions.layoutControls.fillToContainer?(e.style.width="100%",e.style.height="100%"):(e.style.width=o.originalWidth+"px",e.style.height=o.originalHeight+"px"));e.classList.add("fluid_theatre_mode");var t=o.displayOptions.layoutControls.theatreSettings.width,n="10px";switch(e.style.width=t,e.style.height=o.displayOptions.layoutControls.theatreSettings.height,e.style.maxHeight=screen.height+"px",e.style.marginTop=o.displayOptions.layoutControls.theatreSettings.marginTop+"px",o.displayOptions.layoutControls.theatreSettings.horizontalAlign){case"center":"string"==typeof t&&"%"===t.substr(t.length-1)?n=(100-parseInt(t.substring(0,t.length-1)))/2+"%":"string"==typeof t&&"px"===t.substr(t.length-2)?n=(screen.width-parseInt(t.substring(0,t.length-2)))/screen.width*100/2+"%":console.log("[FP_ERROR] Theatre width specified invalid."),e.style.left=n;break;case"right":e.style.right=n;break;default:e.style.left=n}},o.posterImage=function(){if(o.displayOptions.layoutControls.posterImage){var e=document.createElement("div");e.id=o.videoPlayerId+"_fluid_pseudo_poster",e.className="fluid_pseudo_poster",-1!==["auto","contain","cover"].indexOf(o.displayOptions.layoutControls.posterImageSize)?(e.style.background="url('"+o.displayOptions.layoutControls.posterImage+"') center center / "+o.displayOptions.layoutControls.posterImageSize+" no-repeat black",o.domRef.player.parentNode.insertBefore(e,null)):console.log("[FP_ERROR] Not allowed value in posterImageSize")}},o.nextSource=function(){var e=o.domRef.player.getElementsByTagName("source");if(!e.length)return null;for(var t=0;t<e.length-1;t++)if(e[t].getAttribute("src")===o.originalSrc&&e[t+1].getAttribute("src"))return void o.setVideoSource(e[t+1].getAttribute("src"))},o.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}},o.setPersistentSettings=function(){if("undefined"!=typeof Storage&&"undefined"!=typeof localStorage){var e="_fp_storage_enabled",t=localStorage;try{t.setItem(e,"1"),t.removeItem(e)}catch(e){return!1}if(o.fluidStorage=localStorage,void 0!==o.fluidStorage.fluidVolume&&o.displayOptions.layoutControls.persistentSettings.volume&&(o.setVolume(o.fluidStorage.fluidVolume),void 0!==o.fluidStorage.fluidMute&&"true"===o.fluidStorage.fluidMute&&o.muteToggle()),void 0!==o.fluidStorage.fluidQuality&&o.displayOptions.layoutControls.persistentSettings.quality){var n=document.getElementById("source_"+o.videoPlayerId+"_"+o.fluidStorage.fluidQuality),i=document.getElementById(o.videoPlayerId+"_fluid_control_video_source");n&&(n.click(),i.click())}void 0!==o.fluidStorage.fluidSpeed&&o.displayOptions.layoutControls.persistentSettings.speed&&o.setPlaybackSpeed(o.fluidStorage.fluidSpeed),void 0!==o.fluidStorage.fluidTheatre&&"true"===o.fluidStorage.fluidTheatre&&o.displayOptions.layoutControls.persistentSettings.theatre&&o.theatreToggle()}},o.play=function(){if(o.domRef.player.paused)return o.playPauseToggle(),!0},o.pause=function(){return o.domRef.player.paused||o.playPauseToggle(),!0},o.skipTo=function(e){o.domRef.player.currentTime=e},o.setPlaybackSpeed=function(e){o.isCurrentlyPlayingAd||(o.domRef.player.playbackRate=e,o.fluidStorage.fluidSpeed=e)},o.setVolume=function(e){o.domRef.player.volume=e;var t=0===e?1:e;o.latestVolume=t,o.fluidStorage.fluidVolume=t},o.isCurrentlyPlayingVideo=function(e){return e&&e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},o.setHtmlOnPauseBlock=function(t){if("object"!=e(t)||void 0===t.html)return!1;var n=document.getElementById(o.videoPlayerId+"_fluid_html_on_pause");if(!n){var i=document.createElement("div");return i.id=o.videoPlayerId+"_fluid_html_on_pause",i.className="fluid_html_on_pause",i.style.display="none",i.innerHTML=t.html,i.onclick=function(){o.playPauseToggle()},t.width&&(i.style.width=t.width+"px"),t.height&&(i.style.height=t.height+"px"),void o.domRef.player.parentNode.insertBefore(i,null)}n.innerHTML=t.html,t.width&&(n.style.width=t.width+"px"),t.height&&(n.style.height=t.height+"px")},o.toggleControlBar=function(e){var t=document.getElementById(o.videoPlayerId+"fluid_controls_container");e?t.className+=" initial_controls_show":t.className=t.className.replace(" initial_controls_show","")},o.on=function(e,t){switch(e){case"play":o.domRef.player.onplay=t;break;case"seeked":o.domRef.player.onseeked=t;break;case"ended":o.domRef.player.onended=t;break;case"pause":o.domRef.player.addEventListener("pause",(function(){o.fluidPseudoPause||t()}));break;case"playing":o.domRef.player.addEventListener("playing",t);break;case"theatreModeOn":o.domRef.player.addEventListener("theatreModeOn",t);break;case"theatreModeOff":o.domRef.player.addEventListener("theatreModeOff",t);break;case"timeupdate":o.domRef.player.addEventListener("timeupdate",(function(){t(o.getCurrentTime())}));break;default:console.log("[FP_ERROR] Event not recognised")}},o.toggleLogo=function(t){if("object"!=e(t)||!t.imageUrl)return!1;var n=document.getElementById(o.videoPlayerId+"_logo");o.displayOptions.layoutControls.logo.imageUrl=t.imageUrl?t.imageUrl:null,o.displayOptions.layoutControls.logo.position=t.position?t.position:"top left",o.displayOptions.layoutControls.logo.clickUrl=t.clickUrl?t.clickUrl:null,o.displayOptions.layoutControls.logo.opacity=t.opacity?t.opacity:1,o.displayOptions.layoutControls.logo.mouseOverImageUrl=t.mouseOverImageUrl?t.mouseOverImageUrl:null,o.displayOptions.layoutControls.logo.imageMargin=t.imageMargin?t.imageMargin:"2px",o.displayOptions.layoutControls.logo.hideWithControls=!!t.hideWithControls&&t.hideWithControls,o.displayOptions.layoutControls.logo.showOverAds=!!t.showOverAds&&t.showOverAds,n&&n.remove(),o.initLogo()},o.trackEvent=function(e,t,n,i){void 0===o.events[n]&&(o.events[n]={}),void 0===o.events[n][t]&&(o.events[n][t]=[]),o.events[n][t].push(i),o.registerListener(e,t,n,i)},o.registerListener=function(e,t,n,o){for(var i=e.querySelectorAll(n),a=0;a<i.length;a++)i[a].addEventListener(t,o)},o.copyEvents=function(e){for(var t in o.events)if(o.events.hasOwnProperty(t))for(var n in o.events[t])if(o.events[t].hasOwnProperty(n))for(var i=0;i<o.events[t][n].length;i++)o.registerListener(e,n,t,o.events[t][n][i])},o.destroy=function(){var e=o.destructors.length;if(0!==e){for(var n=0;n<e;++n)o.destructors[n].bind(t)();var i=document.getElementById("fluid_video_wrapper_"+o.videoPlayerId);i?"function"!=typeof i.remove?i.parentNode?i.parentNode.removeChild(i):console.error("Unable to remove wrapper element for Fluid Player instance - no parent"+o.videoPlayerId):i.remove():console.warn("Unable to remove wrapper element for Fluid Player instance - element not found "+o.videoPlayerId)}}},s=function(e){this.play=function(){return e.play()},this.pause=function(){return e.pause()},this.skipTo=function(t){return e.skipTo(t)},this.setPlaybackSpeed=function(t){return e.setPlaybackSpeed(t)},this.setVolume=function(t){return e.setVolume(t)},this.setHtmlOnPauseBlock=function(t){return e.setHtmlOnPauseBlock(t)},this.toggleControlBar=function(t){return e.toggleControlBar(t)},this.toggleFullScreen=function(t){return e.fullscreenToggle(t)},this.destroy=function(){return e.destroy()},this.dashInstance=function(){return e.dashPlayer?e.dashPlayer:null},this.hlsInstance=function(){return e.hlsPlayer?e.hlsPlayer:null},this.on=function(t,n){return e.on(t,n)}};return function(e,t){var n=new d;t||(t={}),n.init(e,t);var o=new s(n);return window,o}}();
